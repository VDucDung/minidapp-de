var DappPortalSDK=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n,r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};function o(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(Io){i(Io)}}function a(e){try{c(r.throw(e))}catch(Io){i(Io)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(Io){a=[6,Io],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function c(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,function(e){e.invalidRequest="-32600",e.methodNotFound="-32601",e.invalidParams="-32602",e.internal="-32603",e.parse="-32700"}(n||(n={}));var u={"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}},l=function(e){function r(t,o,i){var s=this,a=Number.parseInt(t);if(isNaN(a))throw new Error('"code" must be an integer.');var c=null!=o?o:u[n.invalidRequest].message;return(s=e.call(this,c)||this).code=a,i&&(s.data=i),Object.setPrototypeOf(s,r.prototype),s}return t(r,e),r}(Error);!function(e){function r(t,r){return e.call(this,n.invalidRequest,t,r)||this}t(r,e)}(l),function(e){function r(t,r){return e.call(this,n.invalidParams,t,r)||this}t(r,e)}(l),function(e){function r(t,r){return e.call(this,n.methodNotFound,t,r)||this}t(r,e)}(l);var f=function(e){function r(t,r){return e.call(this,n.internal,t,r)||this}return t(r,e),r}(l);function d(){var e=globalThis.klaytn;if(!e)throw new f("Extension is not installed");return e}function h(e){return/Line/.test(e)}function p(e){return/iPad|iPhone|iPod/.test(e)}!function(e){function r(t,r){return e.call(this,n.parse,t,r)||this}t(r,e)}(l);var v="walletType",m="selectedWalletAddress",w=function(){function e(e){this.chainId=e}return e.prototype.setWalletType=function(e){this.setItem(v,e)},e.prototype.getWalletType=function(){return this.getItem(v)},e.prototype.setSelectedWallet=function(e){this.setItem(m,e)},e.prototype.getConnectedWallet=function(){return this.getItem(m)},e.prototype.getKeyWithPrefix=function(e){return"".concat("sdk.dappportal.io",":").concat(this.chainId,":").concat(e)},e.prototype.setItem=function(e,t){localStorage.setItem(this.getKeyWithPrefix(e),t)},e.prototype.getItem=function(e){return localStorage.getItem(this.getKeyWithPrefix(e))},e}();function y(e){return e.replace(/^klay_/,"kaia_")}var g=function(){function e(e,t){this.eventBus=e,this.config=t,this.setExtensionEventProxy()}return e.prototype.request=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o,s;return i(this,(function(i){switch(i.label){case 0:return t=e.method,n=e.params,r="kaia_signLegacy"===(a=t)?"klay_sign":a.replace(/^kaia_/,"klay_"),o=n?this.appendTxTypeParam(r,n):n,s=o?this.convertToLegacyParam(r,o):o,[4,this.requestWithConverter({method:r,params:s})];case 1:return[2,i.sent()]}var a}))}))},e.prototype.switchChain=function(e){return o(this,void 0,void 0,(function(){var e,t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return e=d(),t=e.networkVersion.toString().toLowerCase(),n=this.config.chainId.toString().toLowerCase(),t===n?[2]:(r="0x".concat(parseInt(n,10).toString(16)),o=this.awaitNetworkChange(e,n),[4,e.request({method:"wallet_switchKlaytnChain",params:[{chainId:r}]})]);case 1:return i.sent(),[4,o];case 2:return i.sent(),[2]}}))}))},e.prototype.awaitNetworkChange=function(e,t){return o(this,void 0,void 0,(function(){var e=this;return i(this,(function(n){return[2,new Promise((function(n,r){var o=function(i){"loading"!==i&&(i.toString().toLowerCase()===t.toString().toLowerCase()&&(e.eventBus.removeListener("chainChanged",o),n(null)),e.eventBus.removeListener("chainChanged",o),r("Invalid chain id"))};e.eventBus.on("chainChanged",o)}))]}))}))},e.prototype.requestWithConverter=function(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,d().request(e)];case 1:return t=n.sent(),[2,(r=e.method,o=t,"klay_signTransaction"!==r?o:function(e){var t=e;return{raw:t.rawTransaction}}(o))];case 2:throw function(e){if(!function(e){return"object"==typeof e&&null!==e&&"number"==typeof e.code&&"string"==typeof e.message}(e))return e;var t=e.code,n=e.message;return-32603===t&&n.includes("User denied")?{code:-32001,message:n}:-32603===t&&n.includes('Invalid "from" address')?{code:-32004,message:n}:e}(n.sent());case 3:return[2]}var r,o}))}))},e.prototype.setExtensionEventProxy=function(){var e=this,t=d();t.removeAllListeners(),t.on("accountsChanged",(function(t){e.eventBus.emit("accountsChanged",t)})),t.on("networkChanged",(function(t){e.eventBus.emit("chainChanged",t)})),t.on("disconnected",(function(){e.eventBus.emit("disconnect")}))},e.prototype.appendTxTypeParam=function(e,t){var n=this;return-1===this.config.methodsShouldAttachTxTypeParamsWhenRequestToExtension.indexOf(e)?t:Array.isArray(t)&&t.every((function(e){return"object"==typeof e}))?t.map((function(e){return n.appendTxTypeToObj(e)})):t},e.prototype.convertToLegacyParam=function(e,t){var n=this;return-1===this.config.methodsShouldConvertInputFieldToDataFieldWhenRequestToExtension.indexOf(e)?t:Array.isArray(t)&&t.every((function(e){return"object"==typeof e}))?t.map((function(e){return n.convertInputFieldToDataField(e)})):t},e.prototype.appendTxTypeToObj=function(e){var t=e;return"typeInt"in t?r(r({},t),{type:t.typeInt}):e},e.prototype.convertInputFieldToDataField=function(e){var t,n=e;if("typeInt"in n&&(t=n.typeInt),!t)return e;if(-1===this.config.txTypesShouldConvertInputFieldToDataFieldWhenRequestToExtension.indexOf(t))return e;if(!("input"in n))return e;n.input;var o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(n,["input"]);return r(r({},o),{data:n.input})},e}(),b=function(){function e(e){this.chainRpcUrl=e.chainNodeRpcEndpoint}return e.prototype.requestRpc=function(e){return o(this,void 0,void 0,(function(){var t,n,o,s;return i(this,(function(i){switch(i.label){case 0:return t=r({id:0,jsonrpc:"2.0"},e),[4,fetch(this.chainRpcUrl,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})];case 1:return[4,i.sent().json()];case 2:if(n=i.sent(),o=n.result,s=n.error)throw console.error("Error in RPC request",s),new Error(s);return[2,o]}}))}))},e}();function S(e,t,n){console.log("open iframe, ".concat(e));var r=document.createElement("div");r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100vw",r.style.height="100vh",r.id="iframeDiv";var o=document.createElement("iframe");o.src=e,o.width=t,o.height=n,o.style.border="none";var i=r.appendChild(o);return document.body.appendChild(r),i}function T(){var e=document.getElementById("iframeDiv");null==e||e.remove()}var E,C=function(){function e(e){this.resolveWalletType=function(){},this.rejectWalletType=function(){},this.walletSelectUIUrl=e.sdkUIUrls.walletSelect}return e.prototype.setupListeners=function(){var e=this,t=function(t){var n=e.iframe;if(n&&t.source===n.contentWindow){var r=t.data;if(r&&"object"==typeof r){var o=r.event;if(o)switch(o){case"Loaded":break;case"WalletTypeSelected":var i=r.walletType;e.onWalletTypeSelected(i)}}}};window.addEventListener("message",t),this.eventListener=t},e.prototype.clearListeners=function(){var e=this.eventListener;e&&(window.removeEventListener("message",e),this.eventListener=void 0)},e.prototype.onWalletTypeSelected=function(e){this.resolveWalletType&&this.resolveWalletType(e)},e.prototype.reset=function(){this.resolveWalletType=void 0,this.rejectWalletType=void 0,T(),this.clearListeners()},e.prototype.selectType=function(){return o(this,void 0,void 0,(function(){var e,t,n=this;return i(this,(function(r){switch(r.label){case 0:return e=new Promise((function(e,t){n.resolveWalletType=e,n.rejectWalletType=t})),this.setupListeners(),this.iframe=S(this.walletSelectUIUrl,"300px","400px"),[4,e];case 1:return t=r.sent(),this.reset(),[2,t]}}))}))},e.prototype.cancel=function(){this.rejectWalletType&&this.rejectWalletType(new Error("User canceled")),this.reset()},e}();function I(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(e){e.Web="Web",e.Liff="Liff",e.Extension="Extension",e.Mobile="Mobile"}(E||(E={}));var O,P={exports:{}};var x=(O||(O=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,i,s){var a=n?n+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,i),!0;case 6:return l.fn.call(l.context,t,r,o,i,s),!0}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,o);break;default:if(!c)for(d=1,c=new Array(f-1);d<f;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||o&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(P)),P.exports),_=I(x),k=function(e){function n(t){var r=e.call(this,t.message)||this;return r.name="RpcException",r.code=t.code,r.data=t.data,Object.setPrototypeOf(r,n.prototype),r}return t(n,e),n}(Error),A=function(){function e(e,t){this.communicator=t,this.sdkLocalStorage=new w(e.chainId)}return e.prototype.request=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return t=this.sdkLocalStorage.getConnectedWallet(),n=e.method,t?[3,4]:"kaia_requestAccounts"!==n&&"klay_requestAccounts"!==n&&"eth_requestAccounts"!==n?[3,2]:[4,this.communicator.postRequestAndWaitForResponse({method:y(e.method),params:e.params})];case 1:return r=i.sent(),(o=r[0])&&this.sdkLocalStorage.setSelectedWallet(o),[2,r];case 2:if("kaia_accounts"===n||"klay_accounts"===n||"eth_accounts"===n)return[2,[]];i.label=3;case 3:throw new k({code:-32006,data:null,message:"Wallet is not connected"});case 4:return"kaia_requestAccounts"===n||"klay_requestAccounts"===n||"eth_requestAccounts"===n||"kaia_accounts"===n||"klay_accounts"===n||"eth_accounts"===n?[2,[t]]:[4,this.communicator.postRequestAndWaitForResponse({method:y(e.method),params:e.params})];case 5:return[2,i.sent()]}}))}))},e.prototype.switchChain=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))},e}();function R(e,t){return function(){return e.apply(t,arguments)}}const{toString:L}=Object.prototype,{getPrototypeOf:U}=Object,j=(F=Object.create(null),e=>{const t=L.call(e);return F[t]||(F[t]=t.slice(8,-1).toLowerCase())});var F;const N=e=>(e=e.toLowerCase(),t=>j(t)===e),D=e=>t=>typeof t===e,{isArray:B}=Array,W=D("undefined");const M=N("ArrayBuffer");const q=D("string"),H=D("function"),V=D("number"),K=e=>null!==e&&"object"==typeof e,z=e=>{if("object"!==j(e))return!1;const t=U(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},G=N("Date"),J=N("File"),$=N("Blob"),X=N("FileList"),Q=N("URLSearchParams"),[Y,Z,ee,te]=["ReadableStream","Request","Response","Headers"].map(N);function ne(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,o;if("object"!=typeof e&&(e=[e]),B(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let s;for(r=0;r<i;r++)s=o[r],t.call(null,e[s],s,e)}}function re(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const oe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,ie=e=>!W(e)&&e!==oe;const se=(ae="undefined"!=typeof Uint8Array&&U(Uint8Array),e=>ae&&e instanceof ae);var ae;const ce=N("HTMLFormElement"),ue=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),le=N("RegExp"),fe=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ne(n,((n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)},de="abcdefghijklmnopqrstuvwxyz",he="0123456789",pe={DIGIT:he,ALPHA:de,ALPHA_DIGIT:de+de.toUpperCase()+he};const ve=N("AsyncFunction"),me=(we="function"==typeof setImmediate,ye=H(oe.postMessage),we?setImmediate:ye?(ge=`axios@${Math.random()}`,be=[],oe.addEventListener("message",(({source:e,data:t})=>{e===oe&&t===ge&&be.length&&be.shift()()}),!1),e=>{be.push(e),oe.postMessage(ge,"*")}):e=>setTimeout(e));var we,ye,ge,be;const Se="undefined"!=typeof queueMicrotask?queueMicrotask.bind(oe):"undefined"!=typeof process&&process.nextTick||me;var Te={isArray:B,isArrayBuffer:M,isBuffer:function(e){return null!==e&&!W(e)&&null!==e.constructor&&!W(e.constructor)&&H(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||H(e.append)&&("formdata"===(t=j(e))||"object"===t&&H(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&M(e.buffer),t},isString:q,isNumber:V,isBoolean:e=>!0===e||!1===e,isObject:K,isPlainObject:z,isReadableStream:Y,isRequest:Z,isResponse:ee,isHeaders:te,isUndefined:W,isDate:G,isFile:J,isBlob:$,isRegExp:le,isFunction:H,isStream:e=>K(e)&&H(e.pipe),isURLSearchParams:Q,isTypedArray:se,isFileList:X,forEach:ne,merge:function e(){const{caseless:t}=ie(this)&&this||{},n={},r=(r,o)=>{const i=t&&re(n,o)||o;z(n[i])&&z(r)?n[i]=e(n[i],r):z(r)?n[i]=e({},r):B(r)?n[i]=r.slice():n[i]=r};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&ne(arguments[o],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(ne(t,((t,r)=>{n&&H(t)?e[r]=R(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,s;const a={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)s=o[i],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&U(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:j,kindOfTest:N,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(B(e))return e;let t=e.length;if(!V(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:ce,hasOwnProperty:ue,hasOwnProp:ue,reduceDescriptors:fe,freezeMethods:e=>{fe(e,((t,n)=>{if(H(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];H(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return B(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:re,global:oe,isContextDefined:ie,ALPHABET:pe,generateString:(e=16,t=pe.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&H(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(K(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=B(e)?[]:{};return ne(e,((e,t)=>{const i=n(e,r+1);!W(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:ve,isThenable:e=>e&&(K(e)||H(e))&&H(e.then)&&H(e.catch),setImmediate:me,asap:Se};function Ee(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}Te.inherits(Ee,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const Ce=Ee.prototype,Ie={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Ie[e]={value:e}})),Object.defineProperties(Ee,Ie),Object.defineProperty(Ce,"isAxiosError",{value:!0}),Ee.from=(e,t,n,r,o,i)=>{const s=Object.create(Ce);return Te.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Ee.call(s,e.message,t,n,r,o),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};function Oe(e){return Te.isPlainObject(e)||Te.isArray(e)}function Pe(e){return Te.endsWith(e,"[]")?e.slice(0,-2):e}function xe(e,t,n){return e?e.concat(t).map((function(e,t){return e=Pe(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const _e=Te.toFlatObject(Te,{},null,(function(e){return/^is[A-Z]/.test(e)}));function ke(e,t,n){if(!Te.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Te.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Te.isUndefined(t[e])}))).metaTokens,o=n.visitor||u,i=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Te.isSpecCompliantForm(t);if(!Te.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Te.isDate(e))return e.toISOString();if(!a&&Te.isBlob(e))throw new Ee("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(e)||Te.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,o){let a=e;if(e&&!o&&"object"==typeof e)if(Te.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Te.isArray(e)&&function(e){return Te.isArray(e)&&!e.some(Oe)}(e)||(Te.isFileList(e)||Te.endsWith(n,"[]"))&&(a=Te.toArray(e)))return n=Pe(n),a.forEach((function(e,r){!Te.isUndefined(e)&&null!==e&&t.append(!0===s?xe([n],r,i):null===s?n:n+"[]",c(e))})),!1;return!!Oe(e)||(t.append(xe(o,n,i),c(e)),!1)}const l=[],f=Object.assign(_e,{defaultVisitor:u,convertValue:c,isVisitable:Oe});if(!Te.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Te.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),Te.forEach(n,(function(n,i){!0===(!(Te.isUndefined(n)||null===n)&&o.call(t,n,Te.isString(i)?i.trim():i,r,f))&&e(n,r?r.concat(i):[i])})),l.pop()}}(e),t}function Ae(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Re(e,t){this._pairs=[],e&&ke(e,this,t)}const Le=Re.prototype;function Ue(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function je(e,t,n){if(!t)return e;const r=n&&n.encode||Ue,o=n&&n.serialize;let i;if(i=o?o(t,n):Te.isURLSearchParams(t)?t.toString():new Re(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}Le.append=function(e,t){this._pairs.push([e,t])},Le.toString=function(e){const t=e?function(t){return e.call(this,t,Ae)}:Ae;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class Fe{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Te.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}var Ne={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},De={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Re,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const Be="undefined"!=typeof window&&"undefined"!=typeof document,We="object"==typeof navigator&&navigator||void 0,Me=Be&&(!We||["ReactNative","NativeScript","NS"].indexOf(We.product)<0),qe="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,He=Be&&window.location.href||"http://localhost";var Ve={...Object.freeze({__proto__:null,hasBrowserEnv:Be,hasStandardBrowserEnv:Me,hasStandardBrowserWebWorkerEnv:qe,navigator:We,origin:He}),...De};function Ke(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),a=o>=e.length;if(i=!i&&Te.isArray(r)?r.length:i,a)return Te.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!s;r[i]&&Te.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],o)&&Te.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!s}if(Te.isFormData(e)&&Te.isFunction(e.entries)){const n={};return Te.forEachEntry(e,((e,r)=>{t(function(e){return Te.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const ze={transitional:Ne,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=Te.isObject(e);o&&Te.isHTMLForm(e)&&(e=new FormData(e));if(Te.isFormData(e))return r?JSON.stringify(Ke(e)):e;if(Te.isArrayBuffer(e)||Te.isBuffer(e)||Te.isStream(e)||Te.isFile(e)||Te.isBlob(e)||Te.isReadableStream(e))return e;if(Te.isArrayBufferView(e))return e.buffer;if(Te.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ke(e,new Ve.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Ve.isNode&&Te.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=Te.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ke(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e,t){if(Te.isString(e))try{return(t||JSON.parse)(e),Te.trim(e)}catch(Io){if("SyntaxError"!==Io.name)throw Io}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ze.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Te.isResponse(e)||Te.isReadableStream(e))return e;if(e&&Te.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Io){if(n){if("SyntaxError"===Io.name)throw Ee.from(Io,Ee.ERR_BAD_RESPONSE,this,null,this.response);throw Io}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ve.classes.FormData,Blob:Ve.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],(e=>{ze.headers[e]={}}));const Ge=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Je=Symbol("internals");function $e(e){return e&&String(e).trim().toLowerCase()}function Xe(e){return!1===e||null==e?e:Te.isArray(e)?e.map(Xe):String(e)}function Qe(e,t,n,r,o){return Te.isFunction(r)?r.call(this,t,n):(o&&(t=n),Te.isString(t)?Te.isString(r)?-1!==t.indexOf(r):Te.isRegExp(r)?r.test(t):void 0:void 0)}class Ye{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=$e(t);if(!o)throw new Error("header name must be a non-empty string");const i=Te.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Xe(e))}const i=(e,t)=>Te.forEach(e,((e,n)=>o(e,n,t)));if(Te.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(Te.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&Ge[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Te.isHeaders(e))for(const[s,a]of e.entries())o(a,s,n);else null!=e&&o(t,e,n);return this}get(e,t){if(e=$e(e)){const n=Te.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Te.isFunction(t))return t.call(this,e,n);if(Te.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=$e(e)){const n=Te.findKey(this,e);return!(!n||void 0===this[n]||t&&!Qe(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=$e(e)){const o=Te.findKey(n,e);!o||t&&!Qe(0,n[o],o,t)||(delete n[o],r=!0)}}return Te.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!Qe(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return Te.forEach(this,((r,o)=>{const i=Te.findKey(n,o);if(i)return t[i]=Xe(r),void delete t[o];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(o):String(o).trim();s!==o&&delete t[o],t[s]=Xe(r),n[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Te.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Te.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Je]=this[Je]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=$e(e);t[r]||(!function(e,t){const n=Te.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return Te.isArray(e)?e.forEach(r):r(e),this}}function Ze(e,t){const n=this||ze,r=t||n,o=Ye.from(r.headers);let i=r.data;return Te.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function et(e){return!(!e||!e.__CANCEL__)}function tt(e,t,n){Ee.call(this,null==e?"canceled":e,Ee.ERR_CANCELED,t,n),this.name="CanceledError"}function nt(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Ee("Request failed with status code "+n.status,[Ee.ERR_BAD_REQUEST,Ee.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}Ye.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Te.reduceDescriptors(Ye.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),Te.freezeMethods(Ye),Te.inherits(tt,Ee,{__CANCEL__:!0});const rt=(e,t,n=3)=>{let r=0;const o=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),u=r[s];o||(o=c),n[i]=a,r[i]=c;let l=s,f=0;for(;l!==i;)f+=n[l++],l%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-o<t)return;const d=u&&c-u;return d?Math.round(1e3*f/d):void 0}}(50,250);return function(e,t){let n,r,o=0,i=1e3/t;const s=(t,i=Date.now())=>{o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),a=t-o;a>=i?s(e,t):(n=e,r||(r=setTimeout((()=>{r=null,s(n)}),i-a)))},()=>n&&s(n)]}((n=>{const i=n.loaded,s=n.lengthComputable?n.total:void 0,a=i-r,c=o(a);r=i;e({loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&i<=s?(s-i)/c:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},ot=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},it=e=>(...t)=>Te.asap((()=>e(...t)));var st=Ve.hasStandardBrowserEnv?function(){const e=Ve.navigator&&/(msie|trident)/i.test(Ve.navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=Te.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},at=Ve.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const s=[e+"="+encodeURIComponent(t)];Te.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Te.isString(r)&&s.push("path="+r),Te.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ct(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ut=e=>e instanceof Ye?{...e}:e;function lt(e,t){t=t||{};const n={};function r(e,t,n){return Te.isPlainObject(e)&&Te.isPlainObject(t)?Te.merge.call({caseless:n},e,t):Te.isPlainObject(t)?Te.merge({},t):Te.isArray(t)?t.slice():t}function o(e,t,n){return Te.isUndefined(t)?Te.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function i(e,t){if(!Te.isUndefined(t))return r(void 0,t)}function s(e,t){return Te.isUndefined(t)?Te.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>o(ut(e),ut(t),!0)};return Te.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=c[r]||o,s=i(e[r],t[r],r);Te.isUndefined(s)&&i!==a||(n[r]=s)})),n}var ft=e=>{const t=lt({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:c}=t;if(t.headers=a=Ye.from(a),t.url=je(ct(t.baseURL,t.url),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Te.isFormData(r))if(Ve.hasStandardBrowserEnv||Ve.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Ve.hasStandardBrowserEnv&&(o&&Te.isFunction(o)&&(o=o(t)),o||!1!==o&&st(t.url))){const e=i&&s&&at.read(s);e&&a.set(i,e)}return t};var dt="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=ft(e);let o=r.data;const i=Ye.from(r.headers).normalize();let s,a,c,u,l,{responseType:f,onUploadProgress:d,onDownloadProgress:h}=r;function p(){u&&u(),l&&l(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let v=new XMLHttpRequest;function m(){if(!v)return;const r=Ye.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders());nt((function(e){t(e),p()}),(function(e){n(e),p()}),{data:f&&"text"!==f&&"json"!==f?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v}),v=null}v.open(r.method.toUpperCase(),r.url,!0),v.timeout=r.timeout,"onloadend"in v?v.onloadend=m:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(m)},v.onabort=function(){v&&(n(new Ee("Request aborted",Ee.ECONNABORTED,e,v)),v=null)},v.onerror=function(){n(new Ee("Network Error",Ee.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||Ne;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Ee(t,o.clarifyTimeoutError?Ee.ETIMEDOUT:Ee.ECONNABORTED,e,v)),v=null},void 0===o&&i.setContentType(null),"setRequestHeader"in v&&Te.forEach(i.toJSON(),(function(e,t){v.setRequestHeader(t,e)})),Te.isUndefined(r.withCredentials)||(v.withCredentials=!!r.withCredentials),f&&"json"!==f&&(v.responseType=r.responseType),h&&([c,l]=rt(h,!0),v.addEventListener("progress",c)),d&&v.upload&&([a,u]=rt(d),v.upload.addEventListener("progress",a),v.upload.addEventListener("loadend",u)),(r.cancelToken||r.signal)&&(s=t=>{v&&(n(!t||t.type?new tt(null,e,v):t),v.abort(),v=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const w=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);w&&-1===Ve.protocols.indexOf(w)?n(new Ee("Unsupported protocol "+w+":",Ee.ERR_BAD_REQUEST,e)):v.send(o||null)}))};const ht=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Ee?t:new tt(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new Ee(`timeout ${t} of ms exceeded`,Ee.ETIMEDOUT))}),t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:a}=r;return a.unsubscribe=()=>Te.asap(s),a}},pt=function*(e,t){let n=e.byteLength;if(n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},vt=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},mt=(e,t,n,r)=>{const o=async function*(e,t){for await(const n of vt(e))yield*pt(n,t)}(e,t);let i,s=0,a=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return a(),void e.close();let i=r.byteLength;if(n){let e=s+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),o.return())},{highWaterMark:2})},wt="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,yt=wt&&"function"==typeof ReadableStream,gt=wt&&("function"==typeof TextEncoder?(bt=new TextEncoder,e=>bt.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var bt;const St=(e,...t)=>{try{return!!e(...t)}catch(Io){return!1}},Tt=yt&&St((()=>{let e=!1;const t=new Request(Ve.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Et=yt&&St((()=>Te.isReadableStream(new Response("").body))),Ct={stream:Et&&(e=>e.body)};var It;wt&&(It=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Ct[e]&&(Ct[e]=Te.isFunction(It[e])?t=>t[e]():(t,n)=>{throw new Ee(`Response type '${e}' is not supported`,Ee.ERR_NOT_SUPPORT,n)})})));const Ot=async(e,t)=>{const n=Te.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Te.isBlob(e))return e.size;if(Te.isSpecCompliantForm(e)){const t=new Request(Ve.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Te.isArrayBufferView(e)||Te.isArrayBuffer(e)?e.byteLength:(Te.isURLSearchParams(e)&&(e+=""),Te.isString(e)?(await gt(e)).byteLength:void 0)})(t):n};const Pt={http:null,xhr:dt,fetch:wt&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:u,headers:l,withCredentials:f="same-origin",fetchOptions:d}=ft(e);u=u?(u+"").toLowerCase():"text";let h,p=ht([o,i&&i.toAbortSignal()],s);const v=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let m;try{if(c&&Tt&&"get"!==n&&"head"!==n&&0!==(m=await Ot(l,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Te.isFormData(r)&&(e=n.headers.get("content-type"))&&l.setContentType(e),n.body){const[e,t]=ot(m,rt(it(c)));r=mt(n.body,65536,e,t)}}Te.isString(f)||(f=f?"include":"omit");const o="credentials"in Request.prototype;h=new Request(t,{...d,signal:p,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:r,duplex:"half",credentials:o?f:void 0});let i=await fetch(h);const s=Et&&("stream"===u||"response"===u);if(Et&&(a||s&&v)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=Te.toFiniteNumber(i.headers.get("content-length")),[n,r]=a&&ot(t,rt(it(a),!0))||[];i=new Response(mt(i.body,65536,n,(()=>{r&&r(),v&&v()})),e)}u=u||"text";let w=await Ct[Te.findKey(Ct,u)||"text"](i,e);return!s&&v&&v(),await new Promise(((t,n)=>{nt(t,n,{data:w,headers:Ye.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:h})}))}catch(w){if(v&&v(),w&&"TypeError"===w.name&&/fetch/i.test(w.message))throw Object.assign(new Ee("Network Error",Ee.ERR_NETWORK,e,h),{cause:w.cause||w});throw Ee.from(w,w&&w.code,e,h)}})};Te.forEach(Pt,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Io){}Object.defineProperty(e,"adapterName",{value:t})}}));const xt=e=>`- ${e}`,_t=e=>Te.isFunction(e)||null===e||!1===e;var kt=e=>{e=Te.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!_t(n)&&(r=Pt[(t=String(n)).toLowerCase()],void 0===r))throw new Ee(`Unknown adapter '${t}'`);if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new Ee("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(xt).join("\n"):" "+xt(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function At(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tt(null,e)}function Rt(e){At(e),e.headers=Ye.from(e.headers),e.data=Ze.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return kt(e.adapter||ze.adapter)(e).then((function(t){return At(e),t.data=Ze.call(e,e.transformResponse,t),t.headers=Ye.from(t.headers),t}),(function(t){return et(t)||(At(e),t&&t.response&&(t.response.data=Ze.call(e,e.transformResponse,t.response),t.response.headers=Ye.from(t.response.headers))),Promise.reject(t)}))}const Lt="1.7.7",Ut={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ut[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const jt={};Ut.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,i)=>{if(!1===e)throw new Ee(r(o," has been removed"+(t?" in "+t:"")),Ee.ERR_DEPRECATED);return t&&!jt[o]&&(jt[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}};var Ft={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Ee("options must be an object",Ee.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],s=t[i];if(s){const t=e[i],n=void 0===t||s(t,i,e);if(!0!==n)throw new Ee("option "+i+" must be "+n,Ee.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Ee("Unknown option "+i,Ee.ERR_BAD_OPTION)}},validators:Ut};const Nt=Ft.validators;class Dt{constructor(e){this.defaults=e,this.interceptors={request:new Fe,response:new Fe}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Io){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=lt(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&Ft.assertOptions(n,{silentJSONParsing:Nt.transitional(Nt.boolean),forcedJSONParsing:Nt.transitional(Nt.boolean),clarifyTimeoutError:Nt.transitional(Nt.boolean)},!1),null!=r&&(Te.isFunction(r)?t.paramsSerializer={serialize:r}:Ft.assertOptions(r,{encode:Nt.function,serialize:Nt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&Te.merge(o.common,o[t.method]);o&&Te.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=Ye.concat(i,o);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let l,f=0;if(!a){const e=[Rt.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),l=e.length,u=Promise.resolve(t);f<l;)u=u.then(e[f++],e[f++]);return u}l=s.length;let d=t;for(f=0;f<l;){const e=s[f++],t=s[f++];try{d=e(d)}catch(h){t.call(this,h);break}}try{u=Rt.call(this,d)}catch(h){return Promise.reject(h)}for(f=0,l=c.length;f<l;)u=u.then(c[f++],c[f++]);return u}getUri(e){return je(ct((e=lt(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Te.forEach(["delete","get","head","options"],(function(e){Dt.prototype[e]=function(t,n){return this.request(lt(n||{},{method:e,url:t,data:(n||{}).data}))}})),Te.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(lt(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Dt.prototype[e]=t(),Dt.prototype[e+"Form"]=t(!0)}));class Bt{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new tt(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Bt((function(t){e=t}));return{token:t,cancel:e}}}const Wt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wt).forEach((([e,t])=>{Wt[t]=e}));const Mt=function e(t){const n=new Dt(t),r=R(Dt.prototype.request,n);return Te.extend(r,Dt.prototype,n,{allOwnKeys:!0}),Te.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(lt(t,n))},r}(ze);Mt.Axios=Dt,Mt.CanceledError=tt,Mt.CancelToken=Bt,Mt.isCancel=et,Mt.VERSION=Lt,Mt.toFormData=ke,Mt.AxiosError=Ee,Mt.Cancel=Mt.CanceledError,Mt.all=function(e){return Promise.all(e)},Mt.spread=function(e){return function(t){return e.apply(null,t)}},Mt.isAxiosError=function(e){return Te.isObject(e)&&!0===e.isAxiosError},Mt.mergeConfig=lt,Mt.AxiosHeaders=Ye,Mt.formToJSON=e=>Ke(Te.isHTMLForm(e)?new FormData(e):e),Mt.getAdapter=kt,Mt.HttpStatusCode=Wt,Mt.default=Mt;var qt=function(e){function n(t){var r=e.call(this,t)||this;return r.name="LongPollingTimeoutException",Object.setPrototypeOf(r,n.prototype),r}return t(n,e),n}(Error),Ht=function(e){var t=this;this.request=function(e,n){return o(t,void 0,void 0,(function(){var t,r;return i(this,(function(o){switch(o.label){case 0:t="".concat(this.baseUrl,"/api/v1/request-session/request/").concat(n),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Mt.post(t,e,{headers:{"x-client-id":this.clientId,"Content-Type":"application/json"},timeout:this.relaySessionTimeout})];case 2:return o.sent(),[3,4];case 3:throw r=o.sent(),console.error("Fail to request - ",r),r;case 4:return[2]}}))}))},this.waitForResponse=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t=1,r.label=1;case 1:if(!(t<this.maxRetryCount))return[3,6];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.fetchWithTimeout(e)];case 3:return[2,r.sent()];case 4:if(!((n=r.sent())instanceof Error&&n instanceof qt))throw n;return t++,[3,5];case 5:return[3,1];case 6:throw new Error("Fail to wait for response")}}))}))},this.fetchWithTimeout=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t="".concat(this.baseUrl,"/api/v1/request-session/response/").concat(e,"/wait"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Mt.get(t,{headers:{"x-client-id":this.clientId,"Content-Type":"application/json"},timeout:this.relaySessionTimeout})];case 2:return[2,r.sent().data];case 3:throw n=r.sent(),Mt.isAxiosError(n)&&408==n.status?new qt:(console.error("Unexpected Error - ",n),n);case 4:return[2]}}))}))},this.clientId=e.clientId,this.baseUrl=e.relayServerConfig.baseUrl,this.relaySessionTimeout=e.relayServerConfig.relaySessionTimeout,this.maxRetryCount=e.relayServerConfig.maxRetryCount};const Vt=[];for(let Oc=0;Oc<256;++Oc)Vt.push((Oc+256).toString(16).slice(1));let Kt;const zt=new Uint8Array(16);function Gt(){if(!Kt){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Kt=crypto.getRandomValues.bind(crypto)}return Kt(zt)}var Jt={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function $t(e,t,n){if(Jt.randomUUID&&!t&&!e)return Jt.randomUUID();const r=(e=e||{}).random||(e.rng||Gt)();return r[6]=15&r[6]|64,r[8]=63&r[8]|128,function(e,t=0){return(Vt[e[t+0]]+Vt[e[t+1]]+Vt[e[t+2]]+Vt[e[t+3]]+"-"+Vt[e[t+4]]+Vt[e[t+5]]+"-"+Vt[e[t+6]]+Vt[e[t+7]]+"-"+Vt[e[t+8]]+Vt[e[t+9]]+"-"+Vt[e[t+10]]+Vt[e[t+11]]+Vt[e[t+12]]+Vt[e[t+13]]+Vt[e[t+14]]+Vt[e[t+15]]).toLowerCase()}(r)}var Xt=function(){function e(e){this.config=e,this.relayRequestClient=new Ht(e)}return e.prototype.handleRpcResponse=function(e){if(function(e){return void 0!==e.error}(e))throw new k(e.error);return e.result},e.prototype.createRequestKey=function(){return $t()},e}(),Qt="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||{},Yt="URLSearchParams"in Qt,Zt="Symbol"in Qt&&"iterator"in Symbol,en="FileReader"in Qt&&"Blob"in Qt&&function(){try{return new Blob,!0}catch(Io){return!1}}(),tn="FormData"in Qt,nn="ArrayBuffer"in Qt;if(nn)var rn=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],on=ArrayBuffer.isView||function(e){return e&&rn.indexOf(Object.prototype.toString.call(e))>-1};function sn(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function an(e){return"string"!=typeof e&&(e=String(e)),e}function cn(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return Zt&&(t[Symbol.iterator]=function(){return t}),t}function un(e){this.map={},e instanceof un?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function ln(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function fn(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function dn(e){var t=new FileReader,n=fn(t);return t.readAsArrayBuffer(e),n}function hn(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function pn(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:en&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:tn&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:Yt&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():nn&&en&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=hn(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):nn&&(ArrayBuffer.prototype.isPrototypeOf(e)||on(e))?this._bodyArrayBuffer=hn(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Yt&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},en&&(this.blob=function(){var e=ln(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=ln(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(en)return this.blob().then(dn);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,r,o,i=ln(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=fn(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),o=r?r[1]:"utf-8",t.readAsText(e,o),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},tn&&(this.formData=function(){return this.text().then(wn)}),this.json=function(){return this.text().then(JSON.parse)},this}un.prototype.append=function(e,t){e=sn(e),t=an(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},un.prototype.delete=function(e){delete this.map[sn(e)]},un.prototype.get=function(e){return e=sn(e),this.has(e)?this.map[e]:null},un.prototype.has=function(e){return this.map.hasOwnProperty(sn(e))},un.prototype.set=function(e,t){this.map[sn(e)]=an(t)},un.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},un.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),cn(e)},un.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),cn(e)},un.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),cn(e)},Zt&&(un.prototype[Symbol.iterator]=un.prototype.entries);var vn=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function mn(e,t){if(!(this instanceof mn))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,o=(t=t||{}).body;if(e instanceof mn){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new un(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new un(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),vn.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in Qt)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function wn(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function yn(e,t){if(!(this instanceof yn))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new un(t.headers),this.url=t.url||"",this._initBody(e)}mn.prototype.clone=function(){return new mn(this,{body:this._bodyInit})},pn.call(mn.prototype),pn.call(yn.prototype),yn.prototype.clone=function(){return new yn(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new un(this.headers),url:this.url})},yn.error=function(){var e=new yn(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var gn=[301,302,303,307,308];yn.redirect=function(e,t){if(-1===gn.indexOf(t))throw new RangeError("Invalid status code");return new yn(null,{status:t,headers:{location:e}})};var bn,Sn=Qt.DOMException;try{new Sn}catch(Ic){(Sn=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),Sn.prototype.constructor=Sn}function Tn(e,t){return new Promise((function(n,r){var o=new mn(e,t);if(o.signal&&o.signal.aborted)return r(new Sn("Aborted","AbortError"));var i=new XMLHttpRequest;function s(){i.abort()}if(i.onload=function(){var e,t,r={statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new un,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();try{t.append(r,o)}catch(i){console.warn("Response "+i.message)}}})),t)};0===o.url.indexOf("file://")&&(i.status<200||i.status>599)?r.status=200:r.status=i.status,r.url="responseURL"in i?i.responseURL:r.headers.get("X-Request-URL");var s="response"in i?i.response:i.responseText;setTimeout((function(){n(new yn(s,r))}),0)},i.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},i.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request timed out"))}),0)},i.onabort=function(){setTimeout((function(){r(new Sn("Aborted","AbortError"))}),0)},i.open(o.method,function(e){try{return""===e&&Qt.location.href?Qt.location.href:e}catch(Io){return e}}(o.url),!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&(en?i.responseType="blob":nn&&(i.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof un||Qt.Headers&&t.headers instanceof Qt.Headers)){var a=[];Object.getOwnPropertyNames(t.headers).forEach((function(e){a.push(sn(e)),i.setRequestHeader(e,an(t.headers[e]))})),o.headers.forEach((function(e,t){-1===a.indexOf(t)&&i.setRequestHeader(t,e)}))}else o.headers.forEach((function(e,t){i.setRequestHeader(t,e)}));o.signal&&(o.signal.addEventListener("abort",s),i.onreadystatechange=function(){4===i.readyState&&o.signal.removeEventListener("abort",s)}),i.send(void 0===o._bodyInit?null:o._bodyInit)}))}Tn.polyfill=!0,Qt.fetch||(Qt.fetch=Tn,Qt.Headers=un,Qt.Request=mn,Qt.Response=yn),function(e){e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR"}(bn||(bn={}));var En,Cn=function(){function e(e){void 0===e&&(e=bn.INFO),this.logLevel=e,this._debug=console.debug,this._info=console.info,this._warn=console.warn,this._error=console.error}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<=bn.DEBUG&&(e.unshift("[DEBUG]"),this._debug.apply(this,c([],a(e),!1)))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<=bn.INFO&&(e.unshift("[INFO]"),this._info.apply(this,c([],a(e),!1)))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<=bn.WARN&&(e.unshift("[WARN]"),this._warn.apply(this,c([],a(e),!1)))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<=bn.ERROR&&(e.unshift("[ERROR]"),this._error.apply(this,c([],a(e),!1)))},e}(),In=new Cn(Number("3")),On=function(e,t){this._driver=e,this.liff=t,this.hooks=this._driver.hooks,this.internalHooks=this._driver.internalHooks},Pn=function(e,t){this._driver=e,this.liff=t,this.hooks=this._driver.hooks},xn=function(){function e(e,t){this.pluginCtx=new Pn(e,t),this.moduleCtx=new On(e,t)}return Object.defineProperty(e.prototype,"pluginContext",{get:function(){return this.pluginCtx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"moduleContext",{get:function(){return this.moduleCtx},enumerable:!1,configurable:!0}),e}(),_n=function(){function e(){this.modules=new Map,this.hooks={},this.internalHooks={}}return e.prototype.addModule=function(e,t){this.modules.set(e,t),t.hooks&&(this.hooks[e]=Object.entries(t.hooks).reduce((function(e,t){var n,o=a(t,2),i=o[0],s=o[1];return r(r({},e),((n={})[i]=s.on.bind(s),n))}),{})),"internalHooks"in t&&t.internalHooks&&(this.internalHooks[e]=Object.entries(t.internalHooks).reduce((function(e,t){var n,o=a(t,2),i=o[0],s=o[1];return r(r({},e),((n={})[i]=s.on.bind(s),n))}),{}))},e.prototype.hasModule=function(e){return this.modules.has(e)},e}(),kn=function(){},An=function(e){return e instanceof kn},Rn=function(e){function n(t,n,r){var o=e.call(this)||this;return o.driver=t,o.contextHolder=n,o.option=r,o}return t(n,e),n.prototype.install=function(){return this.factory(this.driver,this.contextHolder)},Object.defineProperty(n.prototype,"name",{get:function(){return"use"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"defaultOption",{get:function(){return{namespacePrefix:"$"}},enumerable:!1,configurable:!0}),n.prototype.factory=function(e,t){var n=Object.assign({},this.defaultOption,this.option).namespacePrefix;return function(r,o){if(!r||"function"!=typeof r.install||"string"!=typeof r.name)return In.warn("To install the plugin, you need to define the `name` property and the `install` method."),this;var i=An(r)?r.name:"".concat(n).concat(r.name);if(e.hasModule(i))return this;var s=An(r)?r.install.call(r,t.moduleContext,o):r.install.call(r,t.pluginContext,o);return this["".concat(i)]?(In.warn("There is a duplicate plugin name. `".concat(i,"` plugin namespace will be override.")),this["".concat(i)]=s):void 0!==s&&(this["".concat(i)]=s),e.addModule(i,r),this}},n}(kn),Ln=new Promise((function(e){En=e})),Un="UNKNOWN",jn="UNAUTHORIZED",Fn="INVALID_ARGUMENT",Nn="INIT_FAILED",Dn="FORBIDDEN",Bn="INVALID_CONFIG",Wn="INVALID_ID_TOKEN",Mn="CREATE_SUBWINDOW_FAILED",qn="EXCEPTION_IN_SUBWINDOW",Hn="liffEvent",Vn="LIFF_STORE",Kn="https://liff.".concat("line.me","/"),zn="https://miniapp.".concat("line.me","/"),Gn={ACCESS_TOKEN:"accessToken",ID_TOKEN:"IDToken",DECODED_ID_TOKEN:"decodedIDToken",FEATURE_TOKEN:"featureToken",LOGIN_TMP:"loginTmp",CONFIG:"config",CONTEXT:"context",EXPIRES:"expires",RAW_CONTEXT:"rawContext",CLIENT_ID:"clientId",IS_SUBSEQUENT_LIFF_APP:"isSubsequentLiffApp",MST_CHALLENGE:"mstChallenge",MSIT:"msit",MST:"mst",MST_VERIFIER:"mstVerifier",APP_DATA:"appData"},Jn="isInClient",$n=["context_token","feature_token","access_token","id_token","client_id","mst_verifier","mst_challenge","msit"],Xn=["liff.ref.source","liff.ref.medium","liff.ref.campaign","liff.ref.term","liff.ref.content"],Qn={INIT:"init",SUBMIT:"submit",CANCEL:"cancel",CLOSE:"close",ERROR:"error"},Yn="liff.subwindow",Zn="healthCheck",er=["profile","chat_message.write","openid","email"];function tr(e){return window.atob(e.replace(/-/g,"+").replace(/_/g,"/"))}var nr={decode:tr,encode:function(e){return window.btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},decodeUnicode:function(e){var t=tr(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("");return decodeURIComponent(t)}};function rr(e,t){if(e===t)return 0;for(var n=e.split("."),r=t.split("."),o=Math.max(n.length,r.length),i=0;i<o;i++){n[i]||(n[i]="0"),r[i]||(r[i]="0");var s=parseInt(n[i])-parseInt(r[i]);if(0!==s)return s>0?1:-1}return 0}function or(e){var t=e.replace("#","").match(/.{2}/g)||[];if(4!==t.length)return In.warn("convertArgbToRgba: Received invalid ARGB color"),"";var n=function(e){var t=ir(e);return Math.round(t/255*100)/100}(t[0]),r=ir(t[1]),o=ir(t[2]),i=ir(t[3]);return"rgba(".concat(r,", ").concat(o,", ").concat(i,", ").concat(n,")")}function ir(e){return parseInt(e,16)}function sr(e){var t=e.replace("#","").match(/.{2}/g)||[];if(3!==t.length)return In.warn("convertArgbToRgba: Received invalid hex color"),"";var n=ir(t[0]),r=ir(t[1]),o=ir(t[2]);return"".concat(n,", ").concat(r,", ").concat(o)}function ar(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}var cr=function(e){var t=new RegExp("(?:(?:^|.*;\\s*)".concat(e,"\\s*\\=\\s*([^;]*).*$)|^.*$"));return document.cookie.replace(t,"$1")},ur=function(e,t,n){var r=e+"="+t;if(n)for(var o in n){var i=n[o]?"=".concat(n[o]):"";r+="; ".concat(o).concat(i)}In.debug("set cookie",r),document.cookie=r},lr=function(e,t){var n="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 GMT");if(t)for(var r in t)n+="; ".concat(r,"=").concat(t[r]);document.cookie=n},fr=new Set(["400","401","403","404","429","500"]),dr=function(e){function n(t,n,r){var o=e.call(this,n,r)||this;return o.code=t,o}return t(n,e),n}(Error);function hr(e,t,n){return(null==n?void 0:n.cause)&&console.error("This is the cause of LiffError described below.",n.cause),new dr(e,t||"",n||{})}function pr(e){var t=e.match(/([^-]+)-[^-]+/);return t&&t[1]}var vr,mr=function(){function e(){this.map={}}return e.prototype.clear=function(){this.map={}},e.prototype.getItem=function(e){var t=this.map[e];return void 0===t?null:t},e.prototype.setItem=function(e,t){this.map[e]=t},e.prototype.removeItem=function(e){delete this.map[e]},e.prototype.key=function(e){var t=Object.keys(this.map)[e];return void 0===t?null:t},Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.map).length},enumerable:!1,configurable:!0}),e}(),wr=function(e){return e.replace(/^\?/,"").replace(/^#\/?/,"").split(/&+/).filter((function(e){return e.length>0})).reduce((function(e,t){var n=a(t.split("=").map(decodeURIComponent),2),r=n[0],o=n[1],i=e[r];return Array.isArray(i)?i.push(o):Object.prototype.hasOwnProperty.call(e,r)?e[r]=[i,o]:e[r]=o,e}),{})},yr=function(e){return Object.keys(e).map((function(t){var n=e[t],r=function(e){return void 0!==e?"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e)):encodeURIComponent(t)};return Array.isArray(n)?n.map((function(e){return r(e)})).join("&"):r(n)})).join("&")},gr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function br(e){for(var t="",n=0;n<e;n++)t+=gr[Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967296*62)];return t}function Sr(e){var t=new URL(e),n=t.hash.slice(1).split("&").filter((function(e){return!$n.some((function(t){return e.startsWith("".concat(t,"="))}))})).join("&");return t.hash=n,t.toString()}function Tr(e){var t,n,r=new URL(e);return r.toString().replace(new RegExp(String.raw(Cr||(t=["^",""],n=["^",""],Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,Cr=t),r.origin)),"")}function Er(e,t){if(!e)throw new Error("addParamsToUrl: invalid URL");var n=new URL(e);return Object.entries(t).forEach((function(e){var t=a(e,2),r=t[0],o=t[1];n.searchParams.set(r,o)})),n.toString()}var Cr,Ir=((vr={})[Kn]=function(){var e=Pr(Kn);return new RegExp("^".concat(e,"(\\d+-\\w+)"))},vr[zn]=function(){var e=Pr(zn);return new RegExp("^".concat(e,"((\\d+-\\w+)|(\\w+$))"))},vr);function Or(e){for(var t in Ir){var n=e.match(Ir[t]());if(n)return n[1]}return null}function Pr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xr(e){return e.startsWith("line:")}function _r(e){return void 0===e&&(e=window.navigator.userAgent),/ipad/.test(e.toLowerCase())}function kr(e){return void 0===e&&(e=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+/.test(e)}function Ar(e){return void 0===e&&(e=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+ LIFF/.test(e)}var Rr=function(){return"undefined"==typeof window},Lr=null;function Ur(){return null===Lr&&(Lr=Ar()||kr()&&/[#|&]access_token=/.test(location.hash)||"1"===sessionStorage.getItem("".concat(Vn,":").concat(Jn)),sessionStorage.setItem("".concat(Vn,":").concat(Jn),Lr?"1":"0")),!!Lr}function jr(){var e;return null!==(e=window.__liffConfig)&&void 0!==e?e:{}}function Fr(e){return function(e,t){if(!t)throw hr(Bn,"liffId is necessary for liff.init()");var n=(Ur()?sessionStorage:localStorage).getItem("".concat(Vn,":").concat(t,":").concat(e));try{return null===n?null:JSON.parse(n)}catch(Na){return null}}(e,jr().liffId)}function Nr(e,t){var n=jr().liffId;if(!n)throw hr(Bn,"liffId is necessary for liff.init()");(Ur()?sessionStorage:localStorage).setItem("".concat(Vn,":").concat(n,":").concat(e),JSON.stringify(t))}function Dr(){return Fr(Gn.CONTEXT)}function Br(e){Nr(Gn.CONTEXT,e)}function Wr(){return((Dr()||{}).d||{}).aId}function Mr(){return((Dr()||{}).d||{}).autoplay||!1}function qr(){return(Dr()||{}).profilePlus}function Hr(e){Nr(Gn.APP_DATA,e)}function Vr(){return Fr(Gn.MST)}function Kr(){return Fr(Gn.MST_CHALLENGE)}function zr(e){Nr(Gn.CLIENT_ID,e)}function Gr(){return Fr(Gn.FEATURE_TOKEN)}function Jr(e){Nr(Gn.FEATURE_TOKEN,e)}function $r(){return Fr(Gn.ID_TOKEN)}function Xr(e){Nr(Gn.ID_TOKEN,e)}function Qr(){return Fr(Gn.ACCESS_TOKEN)}function Yr(e){Nr(Gn.ACCESS_TOKEN,e)}function Zr(e){var t=jr().liffId;if(!t)throw hr(Bn,"liffId is necessary for liff.init()");(Ur()?sessionStorage:localStorage).removeItem("".concat(Vn,":").concat(t,":").concat(e))}function eo(){return Fr(Gn.LOGIN_TMP)}function to(){Zr(Gn.LOGIN_TMP)}function no(e){var t=jr();ur("".concat(Vn,":").concat(Gn.EXPIRES,":").concat(t.liffId),e.getTime(),{expires:e.toUTCString(),path:"/",secure:null})}function ro(){return Fr(Gn.DECODED_ID_TOKEN)}function oo(e){Nr(Gn.DECODED_ID_TOKEN,e)}function io(){Object.keys(Gn).forEach((function(e){Zr(Gn[e])})),function(){var e=jr();lr("".concat(Vn,":").concat(Gn.EXPIRES,":").concat(e.liffId),{path:"/"})}()}function so(){return!!Qr()}function ao(){return"2.25.0"}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"isInClient"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return Ur()}}}(kn),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getContext"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return Dr()}}}(kn),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getAId"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return Wr()}}}(kn),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getIsVideoAutoPlay"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return Mr()}}}(kn),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getProfilePlus"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return qr()}}}(kn),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getIDToken"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return $r()}}}(kn),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getAccessToken"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return Qr()}}}(kn),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getDecodedIDToken"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return ro()}}}(kn),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"isLoggedIn"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return so()}}}(kn),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getVersion"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return"2.25.0"}}}(kn);var co,uo=function(){function e(){}return e.prototype.invoke=function(){return function(e){return void 0===e&&(e=window.navigator.userAgent),/LIFF\/SubWindow/.test(e)}()},e}(),lo=function(){function e(e){this.storage=e}return Object.defineProperty(e,"IN_SUB_WINDOW_KEY",{get:function(){return"inSubWindow"},enumerable:!1,configurable:!0}),e.prototype.invoke=function(){return new URLSearchParams(window.location.search).has(Yn)&&this.setInSubWindow(!0),!(!this.getInSubWindow()&&!this.getSubWindowIdentifier())},e.prototype.getInSubWindow=function(){var t=this.storage.getItem("".concat(Vn,":").concat(this.getLiffId(),":").concat(e.IN_SUB_WINDOW_KEY));return null!==t&&JSON.parse(t)},e.prototype.getSubWindowIdentifier=function(){var e,t,n="liff.subwindow.identifier",r=new URLSearchParams(window.location.search);return r.get(n)||(e=n,(t=r.get("liff.state"))?new URLSearchParams(t).get(e):null)||null},e.prototype.setInSubWindow=function(t){this.storage.setItem("".concat(Vn,":").concat(this.getLiffId(),":").concat(e.IN_SUB_WINDOW_KEY),String(t))},e.prototype.getLiffId=function(){var e=jr().liffId;if(!e)throw hr(Bn,"liffId is necessary for liff.init()");return e},e}(),fo=function(e){function n(){var t=e.call(this)||this;return Rr()?t.impl={invoke:function(){return!1}}:Ur()?t.impl=new uo:t.impl=new lo(window.sessionStorage),t}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"isSubWindow"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return this.impl.invoke.bind(this.impl)},n}(kn),ho=new fo,po=ho.install();function vo(){var e=navigator.userAgent.match(/Line\/\d+(\.\d+)*/i);return e?e[0].slice(5):null}function mo(){if(!co){var e=window.navigator.userAgent.toLowerCase();co=/iphone|ipad|ipod/.test(e)?"ios":/android/.test(e)?"android":"web"}return co}function wo(e){var t,n=Dr();return null===(t=null==n?void 0:n.availability)||void 0===t?void 0:t[e]}function yo(e,t,n){var r=wo(e),o=n||e;if(!r)return{available:!1,error:{code:Dn,message:"".concat(o," is not allowed in this LIFF app")}};var i=r.minVer,s=r.unsupportedFromVer,a=!i||function(e,t){var n=vo();return!!n&&!(t&&rr(n,t)>0)&&rr(n,e)>=0}(i,s),c=Ur();return c&&!a?{available:!1,error:{code:Dn,message:"".concat(o," is unavailable in this client version.")}}:r.permission?c&&a||t?{available:!0}:{available:!1,error:{code:Dn,message:"".concat(o," is not allowed in external browser")}}:{available:!1,error:{code:Dn,message:"".concat(o," is not allowed in this LIFF app")}}}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getLineVersion"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return vo()}}}(kn),function(e){function n(){return e.call(this)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getOS"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return mo()}}}(kn);var go=function(){return so()?!Ar()&&kr()?{available:!1,error:{code:Dn,message:"Subwindow is not supported in this browser"}}:po()?{available:!1,error:{code:Dn,message:"this api can be only called in parent window"}}:yo("subwindowOpen",!0):{available:!1,error:{code:jn,message:"Need access_token for api call, Please login first"}}},bo=["subwindowOpen","shareTargetPicker","multipleLiffTransition","scanCode","scanCodeV2","getAdvertisingId","addToHomeScreen","bluetoothLeFunction","skipChannelVerificationScreen","createShortcutOnHomeScreen","internalCreateShortcutOnHomeScreen"],So={scanCode:function(){return yo("scanCode")},getAdvertisingId:function(){return yo("getAdvertisingId")},bluetoothLeFunction:function(){return yo("bluetoothLeFunction")},shareTargetPicker:function(){return po()?{available:!1,error:{code:Dn,message:"this api can be only called in parent window"}}:so()?yo("shareTargetPicker",!0):{available:!1,error:{code:jn,message:"Need access_token for api call, Please login first"}}},multipleLiffTransition:function(){var e=wo("multipleLiffTransition");return e&&e.permission?Ur()?{available:!0}:{available:!1,error:{code:Dn,message:"multipleLiffTransition is available only in the LINE App browser"}}:{available:!1,error:{code:Dn,message:"multipleLiffTransition is not allowed in this LIFF app"}}},subwindowOpen:go,scanCodeV2:function(){if(!so())return{available:!1,error:{code:jn,message:"Need access_token for api call, Please login first"}};var e=go();return e.available?yo("scanCodeV2",!0):e},addToHomeScreen:function(){return po()?{available:!1,error:{code:Dn,message:"this api can be only called in parent window"}}:yo("addToHomeScreen")},skipChannelVerificationScreen:function(){var e=Dr();return e?"square_chat"===e.type?{available:!1,error:{code:Dn,message:"skipChannelVerificationScreen is not allowed in OpenChat"}}:yo("skipChannelVerificationScreen"):{available:!1,error:{code:Dn,message:"Context is not found"}}},createShortcutOnHomeScreen:function(){if(po())return{available:!1,error:{code:Dn,message:"this api can be only called in parent window"}};if(!so())return{available:!1,error:{code:jn,message:"Need access_token for api call, Please login first"}};var e=mo();return"android"!==e&&"ios"!==e?{available:!1,error:{code:Dn,message:"this api can be only called in mobile device"}}:yo("addToHomeV2",!0,"createShortcutOnHomeScreen")},internalCreateShortcutOnHomeScreen:function(){if(po())return{available:!1,error:{code:Dn,message:"this api can be only called in parent window"}};if(!so())return{available:!1,error:{code:jn,message:"Need access_token for api call, Please login first"}};var e=mo();if("android"!==e&&"ios"!==e)return{available:!1,error:{code:Dn,message:"this api can be only called in mobile device"}};var t=yo("addToHomeV2",!0,"internalCreateShortcutOnHomeScreen");return t.available?yo("addToHomeLineScheme",!0,"internalCreateShortcutOnHomeScreen"):t}},To=function(e){return function(){var t=e();if(!t.available)throw hr(t.error.code,t.error.message)}},Eo={scanCode:To(So.scanCode),getAdvertisingId:To(So.getAdvertisingId),bluetoothLeFunction:To(So.bluetoothLeFunction),shareTargetPicker:To(So.shareTargetPicker),multipleLiffTransition:To(So.multipleLiffTransition),subwindowOpen:To(So.subwindowOpen),scanCodeV2:To(So.scanCodeV2),addToHomeScreen:To(So.addToHomeScreen),skipChannelVerificationScreen:To(So.skipChannelVerificationScreen),createShortcutOnHomeScreen:To(So.createShortcutOnHomeScreen),internalCreateShortcutOnHomeScreen:To(So.internalCreateShortcutOnHomeScreen)};function Co(e){if(!function(e){return bo.some((function(t){return t===e}))}(e))throw hr(Fn,"Unexpected API name.");var t=So[e];return!t||t().available}!function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.hooks={},t}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"isApiAvailable"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(e){return Co(e)}}}(kn);var Io=function(){function e(){}return e.prototype.invoke=function(e){var t=Eo[e];return!!t&&(t(),!0)},e}(),Oo=function(){function e(e){this.liff=e}return e.prototype.invoke=function(e){return this.liff.checkFeature(e)},e}(),Po=function(){function e(t){rr("2.25.0",e.SDK_VERSION_SUPPORTING_NEW)>=0?this.impl=new Io:this.impl=new Oo(t)}return Object.defineProperty(e,"SDK_VERSION_SUPPORTING_NEW",{get:function(){return"2.11.0"},enumerable:!1,configurable:!0}),e.prototype.invoke=function(e){return this.impl.invoke(e)},e}(),xo=function(e,t){return xo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},xo(e,t)};var _o=!1,ko=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}xo(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"_legacyExtensionsEnabled"},enumerable:!1,configurable:!0}),t.prototype.install=function(){_o=!0},t}(kn);function Ao(){return _o?function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,[])).next())}))}(this,0,void 0,(function(){return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return[3,2];case 1:return[2,e.sent().default];case 2:return[2,new Promise((function(e,t){var n=document.createElement("script"),r=function(){var e;return"ios"===mo()?(e=vo())&&rr(e,"9.19.0")<0?"https://static.line-scdn.net/liff/edge/2/ios-918-extensions_2_22_0.js":"https://static.line-scdn.net/liff/edge/2/ios-extensions_2_22_0.js":"https://static.line-scdn.net/liff/edge/2/non-ios-extensions_2_22_0.js"}();n.onload=function(){var n=window.liffClientExtension;n?e(n):t(hr(Nn,"Unable to load client features. (Extension is empty)"))},n.onerror=function(e){t(hr(Nn,"Unable to load client features.",{cause:e}))},n.src=r,n.type="text/javascript",document.body.appendChild(n)}))]}}))}))}():Promise.resolve(void 0)}function Ro(){io()}function Lo(e){return o(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(o){switch(o.label){case 0:if(!e.ok)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.json()];case 2:return[2,o.sent()];case 3:return o.sent(),[2,e];case 4:return t=String(e.status),n=fr.has(t)?t:Un,[4,e.json().catch((function(){throw hr(n,e.statusText)}))];case 5:throw hr((r=o.sent()).error||n,r.error_description||r.message)}}))}))}function Uo(e){var t=function(e){if(e)return e;var t=Qr();if(!t)throw hr(jn,"Need access_token for api call, Please login first");return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)}}(e&&e.headers);return r(r({},e),{headers:t})}function jo(e,t){var n;try{n=Uo(t)}catch(Ua){return Promise.reject(Ua)}return fetch(e,n).then(Lo)}function Fo(e,t){var n;try{n=Uo(t)}catch(Ua){return Promise.reject(Ua)}return fetch(e,n)}function No(e){var t=e.subdomain,n=void 0===t?"api":t,r=e.pathname;return"https://".concat(n,".").concat("line.me","/").concat(r)}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"logout"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return Ro()}}}(kn);var Do={token:No({pathname:"oauth2/v2.1/token"}),certs:No({pathname:"oauth2/v2.1/certs"}),"openid-configuration":No({subdomain:"access",pathname:".well-known/openid-configuration"}),authorize:No({subdomain:"access",pathname:"liff/v1/authorize"}),profile:No({pathname:"v2/profile"}),message:No({pathname:"message/v3/share"}),friendship:No({pathname:"friendship/v1/status"}),shareTargetPicker:No({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker"}),shareTargetPickerOtt:No({pathname:"liff/v2/apps"}),shareTargetPickerResult:No({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker/result"}),apps:No({pathname:"liff/v2/apps"}),subWindowGetMSIT:No({pathname:"liff/v2/sub/msit"}),subWindowGetMSTByMSIT:No({pathname:"liff/v2/sub/mst"}),subWindowSubscribe:No({subdomain:"liff",pathname:"liff/v2/sub/waitResult"}),subWindowPost:No({pathname:"liff/v2/sub/result"}),subWindowGetAppData:No({pathname:"liff/v2/sub/appData"}),subWindowGetOrigin:function(e){return No({pathname:"liff/v2/sub/".concat(e,"/origin")})},accessTokenVerify:No({pathname:"oauth2/v2.1/verify"}),unauthorizedPermissions:No({subdomain:"liff",pathname:"liff/v2/incrementalAgreement/unauthorizedPermissions"}),permanentLink:No({subdomain:"liff",pathname:"liff/v2/permanentLink"}),createShortcutOnHomeScreen:No({subdomain:"liff-shortcut",pathname:"api/shortcut"})};function Bo(e){return Do[e]}function Wo(e){return jo("".concat(Bo("accessTokenVerify"),"?access_token=").concat(encodeURIComponent(e)),{headers:{"Content-Type":"application/json",Accept:"application/json"}})}var Mo="liff.subwindow.identifier",qo="liff.subwindow.cryptokey",Ho=r(r({},Qn),{GET_DATA:"getData",SET_DATA:"setData",NOT_FOUND:"notFound",TEARDOWN:"teardown"}),Vo="broadcast",Ko="command",zo="main",Go="sub",Jo=function(e){return o(void 0,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,window.crypto.subtle.importKey("jwk",{kty:"oct",k:e,alg:"A128GCM",ext:!0},{name:"AES-GCM"},!1,["encrypt","decrypt"])];case 1:return[2,n.sent()];case 2:throw t=n.sent(),hr(Un,t);case 3:return[2]}}))}))},$o=function(e,t,n){return o(void 0,void 0,void 0,(function(){var r,o,s,a;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),r=(new TextEncoder).encode(e),[4,Jo(t)];case 1:return o=i.sent(),[4,window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},o,(new TextEncoder).encode(n))];case 2:return s=i.sent(),[2,btoa(new Uint8Array(s).reduce((function(e,t){return e+String.fromCharCode(t)}),""))];case 3:throw a=i.sent(),hr(Un,a);case 4:return[2]}}))}))},Xo=function(e,t,n){return o(void 0,void 0,void 0,(function(){var r,o,s,a,c,u,l;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),r=(new TextEncoder).encode(e),[4,Jo(t)];case 1:for(o=i.sent(),s=atob(n),a=new Uint8Array(s.length),c=0;c<s.length;c++)a[c]=s.charCodeAt(c);return[4,window.crypto.subtle.decrypt({name:"AES-GCM",iv:r},o,a.buffer)];case 2:return u=i.sent(),[2,(new TextDecoder).decode(new Uint8Array(u))];case 3:throw l=i.sent(),hr(Un,l);case 4:return[2]}}))}))},Qo=function(e){return"".concat(e.identifier,"-").concat(e.action,"-").concat(e.timestamp)},Yo=function(e){return Object.keys(Qn).map((function(e){return Qn[e]})).includes(e)?Vo:Ko};function Zo(){var e=document.createElement("form");e.method="POST",e.action="$MESSAGE_HANDLER_URL";var t=document.createElement("input");t.type="hidden",t.name="identifier",t.value="$IDENTIFIER",e.appendChild(t),document.body.appendChild(e),e.submit()}var ei=function(e){void 0===e&&(e=zo);var t=this;this.identification={identifier:"",cryptoKey:""},this.messageHandlerInstance=null,this.listeners=new Map,this.sentMessages=[],this.generateIdentification=function(){return o(t,void 0,void 0,(function(){var e,t,n,r,s;return i(this,(function(a){switch(a.label){case 0:return e=new URLSearchParams(window.location.search),t=function(t){var n=e.get("liff.state");return n?new URLSearchParams(n).get(t):null},n=this,s={identifier:this.windowType===zo?br(12):e.get("liff.subwindow.identifier")||t("liff.subwindow.identifier")||""},this.windowType!==zo?[3,2]:[4,o(void 0,void 0,void 0,(function(){var e,t,n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,window.crypto.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"])];case 1:return e=r.sent(),[4,window.crypto.subtle.exportKey("jwk",e)];case 2:if(!(t=r.sent())||!t.k)throw hr(Un,"failed to generate key");return[2,t.k];case 3:throw n=r.sent(),hr(Un,n);case 4:return[2]}}))}))];case 1:return r=a.sent(),[3,3];case 2:r=e.get(qo)||t(qo)||"",a.label=3;case 3:return n.identification=(s.cryptoKey=r,s),[2]}}))}))},this.hasIdentification=function(){var e=t.identification,n=e.identifier,r=e.cryptoKey;return"string"==typeof n&&"string"==typeof r&&n.length>0&&r.length>0},this.isReady=function(){return t.hasIdentification()&&!!t.messageHandlerInstance},this.setup=function(){return o(t,void 0,void 0,(function(){var e,t,n,r,o,s=this;return i(this,(function(i){switch(i.label){case 0:return this.messageHandlerInstance?[2]:[4,this.generateIdentification()];case 1:if(i.sent(),!(e=this.identification.identifier))return[2];if(t=/^[a-zA-Z0-9]+$/gm,!e.match(t))throw hr(Un,"Invalid identifier");return(n=document.createElement("iframe")).style.display="none",n.src="about:blank",document.body.appendChild(n),null===(o=null==n?void 0:n.contentWindow)||void 0===o||o.window.eval("(".concat(Zo.toString().replace("$MESSAGE_HANDLER_URL","".concat("https://liff-subwindow.line.me/liff/v2/sub/messageHandler")).replace("$IDENTIFIER",e.split("'")[0]),")()")),r="iframe-".concat(e,"-ready"),[4,new Promise((function(e){var t=function(o){o.data[r]&&(s.messageHandlerInstance=n,window.addEventListener("message",s.proxyToListeners),e(),document.removeEventListener("message",t))};window.addEventListener("message",t)}))];case 2:return[2,i.sent()]}}))}))},this.teardown=function(){return o(t,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return this.isReady()?[4,this.send({eventName:Ho.TEARDOWN})]:[3,2];case 1:n.sent(),window.removeEventListener("message",this.proxyToListeners),this.listeners.clear(),null===(t=null===(e=this.messageHandlerInstance)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(this.messageHandlerInstance),this.messageHandlerInstance=null,n.label=2;case 2:return[2]}}))}))},this.listen=function(e){t.listeners.set(e,e)},this.listenRepliedEvent=function(e,n){var r=function(o){o.replyTarget&&function(e,t){return Qo(e)===Qo(t)}(o.replyTarget,e)&&(n(o),t.listeners.delete(r))};t.listeners.set(r,r)},this.send=function(e){return o(t,void 0,void 0,(function(){var t,n,r,o,s=this;return i(this,(function(i){switch(i.label){case 0:if(!this.isReady())throw hr("message bus is not ready to send message");return n={action:Yo(e.eventName),identifier:this.identification.identifier||"",timestamp:(new Date).getTime()},[4,this.getEncryptedContext(e)];case 1:return n.context=i.sent(),t=n,null===(o=null===(r=this.messageHandlerInstance)||void 0===r?void 0:r.contentWindow)||void 0===o||o.postMessage({messageBusEvent:t},"*"),this.sentMessages.push(Qo(t)),[4,new Promise((function(e){s.listenRepliedEvent(t,(function(t){e(t.context)}))}))];case 2:return[2,i.sent()]}}))}))},this.reply=function(e,n){return o(t,void 0,void 0,(function(){var t,r,o,s;return i(this,(function(i){switch(i.label){case 0:if(!this.isReady())throw hr("message bus is not ready to send message");if(!e.identifier||!e.timestamp)throw hr(Un,"target message is not valid");return r={action:Vo},[4,this.getEncryptedContext(n)];case 1:return r.context=i.sent(),r.identifier=this.identification.identifier||"",r.timestamp=(new Date).getTime(),r.replyTarget={action:e.action,identifier:e.identifier,timestamp:e.timestamp},t=r,null===(s=null===(o=this.messageHandlerInstance)||void 0===o?void 0:o.contentWindow)||void 0===s||s.postMessage({messageBusEvent:t},"*"),this.sentMessages.push(Qo(t)),[2]}}))}))},this.setData=function(e,n){void 0===e&&(e="appData"),t.send({eventName:Ho.SET_DATA,key:e,data:n})},this.getData=function(e){return void 0===e&&(e="appData"),o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.send({eventName:Ho.GET_DATA,key:e})];case 1:return[2,t.sent()]}}))}))},this.proxyToListeners=function(e){return o(t,void 0,void 0,(function(){var t,n=this;return i(this,(function(s){return(t=e.data.messageBusEvent)?(this.sentMessages.includes(Qo(t))||t.identifier!==this.identification.identifier||t.action!==Vo&&!t.replyTarget||this.listeners.forEach((function(e){return o(n,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){switch(i.label){case 0:return n=e,o=[r({},t)],s={},[4,this.getDecryptedContext(t.context)];case 1:return n.apply(void 0,[r.apply(void 0,o.concat([(s.context=i.sent(),s)]))]),[2]}}))}))})),[2]):[2]}))}))},this.getEncryptedContext=function(e){return o(t,void 0,void 0,(function(){var t,n,r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:return t=this.identification,n=t.identifier,r=t.cryptoKey,s=(o=JSON).stringify,c={eventName:e.eventName,key:e.key?e.key:void 0},e.data?[4,$o(n,r,JSON.stringify(e.data))]:[3,2];case 1:return a=i.sent(),[3,3];case 2:a=void 0,i.label=3;case 3:return[2,s.apply(o,[(c.data=a,c)])]}}))}))},this.getDecryptedContext=function(e){return o(t,void 0,void 0,(function(){var t,n,o,s,a,c,u,l;return i(this,(function(i){switch(i.label){case 0:return t=this.identification,n=t.identifier,o=t.cryptoKey,(s=JSON.parse(e)).data&&"string"==typeof s.data?(l=(u=JSON).parse,[4,Xo(n,o,s.data)]):[3,2];case 1:return c=l.apply(u,[i.sent()]),[3,3];case 2:c=void 0,i.label=3;case 3:return a=c,[2,r(r({},s),{data:a})]}}))}))},this.windowType=e};!function(){if("undefined"!=typeof window&&"function"!=typeof window.CustomEvent){function e(e,t){var n=t||{},r=n.bubbles,o=void 0!==r&&r,i=n.cancelable,s=void 0!==i&&i,a=n.detail,c=void 0===a?void 0:a,u=document.createEvent("CustomEvent");return u.initCustomEvent(e,o,s,c),u}e.prototype=Event.prototype,window.CustomEvent=e}}();var ti={},ni=!1;function ri(e,t){ni||(ni=!0,window.addEventListener(Hn,(function(e){e&&e.detail&&e.detail.type&&ti[e.detail.type]&&ti[e.detail.type].forEach((function(t){return t(e)}))}))),ti[e]?ti[e].push(t):ti[e]=[t]}function oi(e,t){var n=ti[e];if(n&&Array.isArray(n)){var r=n.indexOf(t);r>=0&&n.splice(r,1)}}function ii(e,t,n){void 0===t&&(t={}),void 0===n&&(n="");var r=Gr();if(!r)throw hr(Dn,"Invalid featureToken for client features");if(!window._liff||!window._liff.postMessage)throw hr(Fn,"postMessage is not available from client");In.debug("[js postMessage to client]",e,n,t),window._liff.postMessage(e,r,n,JSON.stringify(t))}function si(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={once:!0}),Gr()?(n=r({callbackId:br(12),once:!0},n),new Promise((function(r,o){var i=function(t){if(t&&t.detail){var s=t.detail.callbackId===n.callbackId,a="string"!=typeof t.detail.callbackId;(s||a)&&(n.once&&oi(e,i),In.debug("[callback detail]",t.detail),t.detail.error?o(t.detail.error):t.detail.data?r(t.detail.data):o(t.detail))}o()};ri(e,i),ii(e,t,n.callbackId)}))):Promise.reject(hr(Dn,"Invalid featureToken for client features"))}function ai(){var e=vo();null!==e&&("ios"===mo()&&rr(e,"9.19")>=0||"android"===mo()&&rr(e,"11.6.0")>=0)?location.href="liff://close":window._liff&&window._liff.postMessage?null!==e&&rr(e,"10.15.0")>=0?"ios"===mo()?window._liff.postMessage("closeWindow",""):window._liff.postMessage("closeWindow","","",""):si("closeWindow"):window.close()}function ci(e){return jo(Bo("subWindowGetOrigin")(e))}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"closeWindow"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return ai()}}}(kn);var ui={};function li(e,t){e&&ui[e]&&ui[e].forEach((function(e){e(t)}))}function fi(e,t){ui[e]||(ui[e]=[]),ui[e].push(t)}function di(e,t){if(ui[e]){var n=ui[e].indexOf(t);n>=0&&ui[e].splice(n,1)}}var hi,pi,vi,mi,wi,yi=function(){function e(e){this.storage=e}return e.prototype.getItem=function(e){return this.storage.getItem("".concat(this.getKeyPrefix(),":").concat(e))},e.prototype.setItem=function(e,t){this.storage.setItem("".concat(this.getKeyPrefix(),":").concat(e),t)},e.prototype.removeItem=function(e){this.storage.removeItem("".concat(this.getKeyPrefix(),":").concat(e))},e.prototype.clear=function(){this.storage.clear()},e.prototype.getKeyPrefix=function(){return"".concat(Vn,":").concat(this.getLiffId())},e.prototype.getLiffId=function(){var e=jr().liffId;if(!e)throw hr(Bn,"liffId is necessary for liff.init()");return e},e}(),gi=new yi(new mr);function bi(){var e=gi.getItem("subWindowStatusUpdated");return null!==e&&JSON.parse(e)}function Si(e){gi.setItem("subWindowStatusUpdated",String(e))}function Ti(e){hi=e}function Ei(){return hi}function Ci(){return vi}function Ii(){return mi}function Oi(e){return void 0===e&&(e=zo),o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,(wi=new ei(e)).setup()];case 1:return t.sent(),[2,wi]}}))}))}function Pi(){return wi}var xi=new mr,_i=new yi(Rr()?xi:window.sessionStorage);function ki(){return _i.getItem("mainWindowOrigin")}function Ai(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,(function(){var n,r,o,s,a,c,u,l;return i(this,(function(i){switch(i.label){case 0:if(null==(n=Pi())?void 0:n.isReady())return[3,5];if(r=JSON.stringify(t),o=jr().liffId,s=ki(),!window.opener||!s||!o)throw hr(qn);a=!1,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,ci(o)];case 2:return c=i.sent(),a=c.subwindowCommonModule,[3,4];case 3:throw u=i.sent(),In.debug(u),hr(qn);case 4:return l=a?s:location.origin,[2,new Promise((function(t){window.addEventListener("message",(function n(o){(function(e){return!(!e.data||"string"!=typeof e.data.type||![Qn.SUBMIT,Qn.CANCEL].includes(e.data.type))})(o)&&(window.removeEventListener("message",n),t({status:e,result:r}))})),window.opener.postMessage({status:e,result:r},l)}))];case 5:return n.send({eventName:e,data:t}),[4,new Promise((function(e){setTimeout(e,500)}))];case 6:return i.sent(),[2,{status:e,result:JSON.stringify(t)}]}}))}))}function Ri(e){var t,n=Ii();if(e.origin===n){var r=e.data;if(r){var o,i=r.status,s=r.result;try{o=JSON.parse(s||"{}")}catch(Wa){o={}}switch(i){case Zn:window.clearInterval(Ci()),Fi();break;case Qn.CANCEL:case Qn.SUBMIT:Si(!0),window.clearInterval(Ci()),window.removeEventListener("message",Ri),li(i,o),null===(t=Ei())||void 0===t||t.postMessage({type:i},Ii());break;default:In.debug("unexpected message")}}}}var Li=function(e){return o(void 0,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){if(bi())return[2];switch(t=e.context,n=t.eventName,r=t.data,o=Pi(),n){case Qn.INIT:ji(!r.hasOpener);break;case Qn.CANCEL:case Qn.SUBMIT:Si(!0),li(n,r),null==o||o.reply(e,{eventName:n});break;case Qn.CLOSE:!1===bi()&&(Si(!0),li(Qn.CLOSE,{})),Fi()}return[2]}))}))};function Ui(){window.clearInterval(pi),window.clearInterval(Ci()),window.removeEventListener("message",Ri)}function ji(e){if(void 0===e&&(e=!1),Ui(),Si(!1),e){var t=Ei();t&&(t.close(),Ti(null))}}function Fi(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return(e=Pi())?[4,e.teardown()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}var Ni=null;function Di(e){return o(this,void 0,void 0,(function(){var t,n,r,s,u,l,f,d,h,p,v,m,w,y,g=this;return i(this,(function(b){switch(b.label){case 0:if(t=e.msit,n=e.mstChallenge,r=e.reconnectCount,s=void 0===r?0:r,u=function(){return o(g,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(e){return setTimeout(e,1e3)}))];case 1:return r.sent(),[4,Di({msit:t,mstChallenge:n,onSuccess:e.onSuccess,onError:e.onError,reconnectCount:s+1})];case 2:return r.sent(),[2]}}))}))},l=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Ni=null,e.onSuccess.apply(e,c([],a(t),!1))},f=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Ni=null,e.onError.apply(e,c([],a(t),!1))},d=Date.now(),null===Ni&&(Ni=d),h=d-Ni,s>=10||h>6e5)return f(hr(Un,"Failed to connect")),[2];b.label=1;case 1:return b.trys.push([1,3,,5]),[4,Fo(Bo("subWindowSubscribe"),{method:"POST",body:JSON.stringify({msit:t,mstChallenge:n})})];case 2:return p=b.sent(),[3,5];case 3:return b.sent(),[4,u()];case 4:return b.sent(),[2];case 5:return p.status>=500?[4,u()]:[3,7];case 6:return b.sent(),[3,17];case 7:return p.status>=400&&500>p.status?[4,Bi(p)]:[3,9];case 8:return m=b.sent(),v=m?hr(Fn,m.errorDetail):hr(Un,"Some error happened in the server"),f(v),[3,17];case 9:return 200!==p.status?[3,16]:[4,Bi(p)];case 10:if(!(m=b.sent()))return f(hr(Un,"Some error happened in the server")),[2];switch(w=m.status,y=m.result,w){case Qn.ERROR:return[3,11];case Qn.CLOSE:case Qn.CANCEL:case Qn.SUBMIT:return[3,13]}return[3,14];case 11:return[4,u()];case 12:return b.sent(),[3,15];case 13:return l(w,y),[3,15];case 14:f(hr(Un,"Some error happened in the server")),b.label=15;case 15:return[3,17];case 16:f(hr(Un,"Some error happened in the server")),b.label=17;case 17:return[2]}}))}))}function Bi(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e.json()];case 1:return[2,t.sent()];case 2:return t.sent(),[2,null];case 3:return[2]}}))}))}function Wi(e){var t={};return Object.keys(e).forEach((function(n){"closeButtonColor"===n?"white"===e[n]?t[n]="#ffffff":t[n]="#000000":t[n]=e[n]})),t}var Mi={height:"full",closeButtonPosition:"right",closeButtonColor:"black",closeButtonLabel:""};function qi(e){var t=e.appData,n=e.native,r=jr().liffId,s=Kr(),a=Or(e.url);if(!r)return Promise.reject(hr(jn,"liffId is invalid"));if(!s)return Promise.reject(hr(jn,"mst_challenge is invalid"));if(!a)return Promise.reject(hr(Fn,"params.url must be liff url or mini url"));var c=Object.assign({},Mi,n);return function(e){var t=e.mainLiffId,n=e.subLiffId,r=e.mstChallenge,o=e.appData,i=e.view;return t&&r?jo(Bo("subWindowGetMSIT"),{method:"POST",body:JSON.stringify({mainLiffId:t,subLiffId:n,mstChallenge:r,appData:o,view:i})}):Promise.reject(hr(Fn,"no proper argument"))}({mainLiffId:r,subLiffId:a,mstChallenge:s,appData:t,view:Wi(c)}).then((function(e){var t=e.msit;return Di({msit:t,mstChallenge:s,onSuccess:function(e,t){li(e,t)},onError:function(e){li(Qn.ERROR,e)}}),t})).then((function(t){return function(e,t){var n;return o(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return r=e.url,(o=new URLSearchParams).set("msit",t),[4,null===(n=e.onBeforeTransition)||void 0===n?void 0:n.call(e)];case 1:return i.sent(),location.href="".concat("liff://subwindow","?url=").concat(encodeURIComponent(r),"&").concat(o.toString()),[2]}}))}))}(e,t)}))}function Hi(e){return Eo.subwindowOpen(),Ur()?qi(e):function(e){var t;return o(this,void 0,void 0,(function(){var n,r,o,s,u,l,f,d,h,p,v;return i(this,(function(i){switch(i.label){case 0:return(n=Or(e.url))?(ji(!0),[4,Fi()]):[2,Promise.reject(hr(Fn,"params.url must be liff url or mini url"))];case 1:return i.sent(),Ti("ios"!==mo()||_r()?window.open("","liffsubwindow","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):window.open()),r=e.url,o=e.appData,(s=new URL(r)).searchParams.append(Yn,"true"),[4,Oi()];case 2:return u=i.sent(),s.searchParams.append(Mo,u.identification.identifier),s.searchParams.append(qo,u.identification.cryptoKey),s.hostname=function(e){var t=a(e.split(".")),n=t[0],r=t.slice(1);return c(["".concat(n,"-ext")],a(r),!1).join(".")}(s.hostname),l=s.toString(),[4,ci(n)];case 3:if(f=i.sent(),d=f.origin,h=f.subwindowCommonModule,!(p=Ei()))throw hr(Mn);if(!h)return p.close(),[2];!function(e){mi=e}(d),u.listen(Li),u.setData("appData",o),window.addEventListener("message",Ri),i.label=4;case 4:return i.trys.push([4,6,,7]),[4,null===(t=e.onBeforeTransition)||void 0===t?void 0:t.call(e)];case 5:return i.sent(),[3,7];case 6:throw v=i.sent(),p.close(),v;case 7:return p.location.href=l,m=function(e,t){var n=Ei(),r={type:Zn};return t&&(r.message=JSON.stringify(t)),window.setInterval((function(){null==n||n.postMessage(r,e)}),100)}(d,o),vi=m,function(e){pi=e}(window.setInterval((function(){var e=Ei();e&&e.closed&&(Ui(),Ti(null),!1===bi()&&(Si(!0),li(Qn.CLOSE,{})))}),100)),[2]}var m}))}))}(e)}function Vi(e){if(!e.mst||!e.status)return Promise.reject(hr(Fn,"no proper argument"));var t=JSON.stringify(e);return jo(Bo("subWindowPost"),{method:"POST",body:t})}function Ki(){if(!po())throw hr(jn,"this api can be only called in child window")}function zi(e){return void 0===e&&(e={}),Ki(),Ur()?function(e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return(t=Vr())?[4,Vi({mst:t,status:Qn.CANCEL,result:e})]:[2,Promise.reject(hr(jn,"mst is invalid"))];case 1:return n=r.sent(),Si(!0),[2,n]}}))}))}(e):function(e){return void 0===e&&(e={}),Ai(Qn.CANCEL,e)}(e)}function Gi(e){return void 0===e&&(e={}),Ki(),Ur()?function(e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return(t=Vr())?[4,Vi({mst:t,status:Qn.SUBMIT,result:e})]:[2,Promise.reject(hr(jn,"mst is invalid"))];case 1:return n=r.sent(),Si(!0),[2,n]}}))}))}(e):function(e){return void 0===e&&(e={}),Ai(Qn.SUBMIT,e)}(e)}function Ji(){return Ki(),Ur()?function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return!1!==bi()?[3,2]:(e=Vr())?[4,Vi({mst:e,status:Qn.CLOSE,result:{}})]:[2,Promise.reject(hr(jn,"mst is invalid"))];case 1:t.sent(),t.label=2;case 2:return ai(),[2]}}))}))}():function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){return(null==(e=Pi())?void 0:e.isReady())?(e.send({eventName:Qn.CLOSE}),[2,new Promise((function(e){setTimeout((function(){ai(),e()}),100)}))]):(ai(),[2,Promise.resolve()])}))}))}()}function $i(){return Ki(),function(){var e,t=Fr(Gn.APP_DATA);try{e=t?JSON.parse(t):{}}catch(Ua){e={}}return Promise.resolve(e)}()}function Xi(e){var t=e.msit,n=e.mstVerifier;return t&&n?jo(Bo("subWindowGetMSTByMSIT"),{method:"POST",body:JSON.stringify({msit:t,mstVerifier:n})}):Promise.reject(hr(Fn,"no proper argument"))}function Qi(e){var t=e.mst;return t?jo(Bo("subWindowGetAppData"),{method:"POST",body:JSON.stringify({mst:t})}):Promise.reject(hr(Fn,"no proper argument"))}var Yi={on:fi,off:di,open:Hi,cancel:zi,submit:Gi,close:Ji,getAppData:$i};!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"subWindow"},enumerable:!1,configurable:!0}),n.prototype.install=function(){var e=this;return{on:fi.bind(this),off:di.bind(this),open:function(t){return Hi.call(e,r(r({},t),{onBeforeTransition:void 0}))},cancel:zi.bind(this),submit:Gi.bind(this),close:Ji.bind(this),getAppData:$i.bind(this)}}}(kn);var Zi,es={exports:{}};var ts,ns,rs=(Zi||(Zi=1,ts=es,function(e,t){ts.exports?ts.exports=t():e.sha256=t()}(es.exports,(function(){var e=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var r,o,i=Math.pow,s=i(2,32),a="length",c="",u=[],l=8*t[a],f=e.h=e.h||[],d=e.k=e.k||[],h=d[a],p={},v=2;h<64;v++)if(!p[v]){for(r=0;r<313;r+=v)p[r]=v;f[h]=i(v,.5)*s|0,d[h++]=i(v,1/3)*s|0}for(t+="";t[a]%64-56;)t+="\0";for(r=0;r<t[a];r++){if((o=t.charCodeAt(r))>>8)return;u[r>>2]|=o<<(3-r)%4*8}for(u[u[a]]=l/s|0,u[u[a]]=l,o=0;o<u[a];){var m=u.slice(o,o+=16),w=f;for(f=f.slice(0,8),r=0;r<64;r++){var y=m[r-15],g=m[r-2],b=f[0],S=f[4],T=f[7]+(n(S,6)^n(S,11)^n(S,25))+(S&f[5]^~S&f[6])+d[r]+(m[r]=r<16?m[r]:m[r-16]+(n(y,7)^n(y,18)^y>>>3)+m[r-7]+(n(g,17)^n(g,19)^g>>>10)|0);(f=[T+((n(b,2)^n(b,13)^n(b,22))+(b&f[1]^b&f[2]^f[1]&f[2]))|0].concat(f))[4]=f[4]+T|0}for(r=0;r<8;r++)f[r]=f[r]+w[r]|0}for(r=0;r<8;r++)for(o=3;o+1;o--){var E=f[r]>>8*o&255;c+=(E<16?0:"")+E.toString(16)}return c};return e.code='var sha256=function a(b){function c(a,b){return a>>>b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o={},p=2;64>n;p++)if(!o[p]){for(d=0;313>d;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="\\x80";b[h]%64-56;)b+="\\x00";for(d=0;d<b[h];d++){if(e=b.charCodeAt(d),e>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(j[j[h]]=k/g|0,j[j[h]]=k,e=0;e<j[h];){var q=j.slice(e,e+=16),r=l;for(l=l.slice(0,8),d=0;64>d;d++){var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+(q[d]=16>d?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0),x=(c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]);l=[w+x|0].concat(l),l[4]=l[4]+w|0}for(d=0;8>d;d++)l[d]=l[d]+r[d]|0}for(d=0;8>d;d++)for(e=3;e+1;e--){var y=l[d]>>8*e&255;i+=(16>y?0:"")+y.toString(16)}return i};',e}))),es.exports),os=I(rs),is=function(){var e=this;this.type="sync",this.fns=new Set,this.on=function(t){e.fns.add(t)},this.call=function(){for(var t,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{for(var i=s(e.fns),u=i.next();!u.done;u=i.next()){u.value.apply(void 0,c([],a(r),!1))}}catch(Wa){t={error:Wa}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},ss=function(){var e=this;this.type="async",this.fns=new Set,this.on=function(t){e.fns.add(t)},this.call=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o(e,void 0,void 0,(function(){var e,n,r,o,u,l;return i(this,(function(i){switch(i.label){case 0:e=[];try{for(n=s(this.fns),r=n.next();!r.done;r=n.next())o=r.value,e.push(o.apply(void 0,c([],a(t),!1)))}catch(Wa){u={error:Wa}}finally{try{r&&!r.done&&(l=n.return)&&l.call(n)}finally{if(u)throw u.error}}return[4,Promise.all(e)];case 1:return i.sent(),[2]}}))}))}},as=function(e){var t,n=br(43),r=function(e){var t="";return e.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").forEach((function(e){t+=String.fromCharCode(parseInt(e))})),window.btoa(t)}(os(n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),o=jr();if(!o||!o.liffId)throw hr(Bn,"You need to define `liffId` for liff.login()");var i={app_id:o.liffId,state:br(12),response_type:"code",code_challenge_method:"S256",code_challenge:r,liff_sdk_version:"2.25.0"};e&&e.redirectUri&&(i.redirect_uri=e.redirectUri),po()&&!Ur()&&((null===(t=Pi())||void 0===t?void 0:t.isReady())?i.redirect_uri=window.location.href:i.disable_auto_login="true"),function(e){Nr(Gn.LOGIN_TMP,e)}({codeVerifier:n});var s=Bo("authorize")+"?"+yr(i);In.debug("[Redirect] ".concat(s)),window.location.href=s},cs=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.hooks={before:new is},t}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"login"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return this._login.bind(this)},n.prototype._login=function(e){this.hooks.before.call(e),as(e)},n}(kn),us="undefined"==typeof navigator?"en":null!==(ns=navigator.language)&&void 0!==ns?ns:"en",ls=null;function fs(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return us=e,[4,ds()];case 1:return t.sent(),[2]}}))}))}function ds(){return o(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return[4,jo("".concat("https://liffsdk.line-scdn.net/xlt/manifest.json"),{method:"GET",headers:{Accept:"application/json"}})];case 1:return e=n.sent(),t="".concat(us),!e.languages[t]&&us.includes("-")&&(t=us.split("-")[0]),e.languages[t]||(t="en"),[4,jo("".concat("https://liffsdk.line-scdn.net/xlt","/").concat(e.languages[t]),{method:"GET",headers:{Accept:"application/json"}})];case 2:return ls=n.sent(),[2]}}))}))}function hs(e){if(null===ls)throw hr(Nn,"please call xlt after liff.init");return ls[e]}var ps=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"i18n"},enumerable:!1,configurable:!0}),n.prototype.install=function(e){return e.internalHooks.init.beforeFinished(this.beforeInitFinished.bind(this)),{setLang:fs}},n.prototype.beforeInitFinished=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,ds()];case 1:return e.sent(),[2]}}))}))},n}(kn),vs=new ps,ms={iconColor:"#111111",statusBarColor:"BLACK",titleTextColor:"#111111",titleSubtextColor:"#B7B7B7",titleButtonColor:"#111111",titleBackgroundColor:"#FFFFFF",progressBarColor:"#06C755",progressBackgroundColor:"#FFFFFF",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#FFFFFF",baseTextColor:"#000000",lightButtonBorderColor:"rgba(0, 0, 0, 0.15)"},ws={iconColor:"#FFFFFF",statusBarColor:"WHITE",titleTextColor:"#FFFFFF",titleSubtextColor:"#949494",titleButtonColor:"#FFFFFF",titleBackgroundColor:"#111111",progressBarColor:"#06C755",progressBackgroundColor:"#111111",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#000000",baseTextColor:"#FFFFFF",lightButtonBorderColor:"rgba(255, 255, 255, 0.5)"};function ys(e){var t=Dr(),n=(null==t?void 0:t.menuColorSetting)||{adaptableColorSchemes:["light"],lightModeColor:ms,darkModeColor:ws},o=n.adaptableColorSchemes,i=n.lightModeColor,s=n.darkModeColor,a=o.includes("dark");e.matches&&a?gs(r(r({},ws),s)):gs(r(r({},ms),i))}function gs(e){var t=e.iconColor,n=e.statusBarColor,r=e.titleTextColor,o=e.titleSubtextColor,i=e.titleButtonColor,s=e.titleBackgroundColor,a=e.progressBarColor,c=e.progressBackgroundColor,u=e.titleButtonAreaBackgroundColor,l=e.titleButtonAreaBorderColor,f=e.baseBackgroundColor,d=e.baseTextColor,h=e.lightButtonBorderColor;bs("--liff-base-background-color",f),bs("--liff-base-text-color",d),bs("--liff-base-background-rgb-color",sr(f)),bs("--liff-base-text-rgb-color",sr(d)),bs("--liff-light-button-border-color",h),bs("--liff-title-text-color",r),bs("--liff-title-background-color",s),bs("--liff-title-button-color",i),bs("--liff-icon-color",t),bs("--liff-status-bar-color",n),bs("--liff-title-subtext-color",o),bs("--liff-progress-bar-color",a),bs("--liff-progress-background-color",c),bs("--liff-title-button-area-background-color",or(u)),bs("--liff-title-button-area-border-color",or(l))}function bs(e,t){document.documentElement.style.setProperty(e,t)}var Ss={addToHomeScreen:function(e){if(!new Po(e).invoke("addToHomeScreen"))throw hr(Dn,"No permission for liff.addToHomeScreen()")},scanCode:function(e){if(!new Po(e).invoke("scanCode"))return Promise.reject(hr(Dn,"No permission for liff.scanCode()"))},getAdvertisingId:function(e){if(!new Po(e).invoke("getAdvertisingId"))return Promise.reject(hr(Dn,"No permission for liff.getAdvertisingId()"))},initPlugins:function(){}};function Ts(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,Ao()];case 1:return(t=n.sent())?(t.install(e,Ss),[2]):[2]}}))}))}function Es(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,jo(Bo("certs"))];case 1:return[2,e.sent()]}}))}))}function Cs(e,t,n){return o(this,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:return[4,crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"])];case 1:return r=o.sent(),[4,crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},r,n,t)];case 2:return[2,o.sent()]}}))}))}function Is(e,t){return o(this,void 0,void 0,(function(){var n,r,o,s,c,u,l,f,d,h,p,v,m,w,y,g;return i(this,(function(i){switch(i.label){case 0:return n=e.split("."),r=a(n,3),o=r[0],s=r[1],c=r[2],u=JSON.parse(nr.decode(o)),l=JSON.parse(nr.decodeUnicode(s)),f=ar(nr.decode(c)),d=ar("".concat(o,".").concat(s)),[4,Es()];case 1:if(h=i.sent(),!(p=h.keys.find((function(e){return e.kid===u.kid}))))return[3,6];if(delete p.alg,"ES256"!==u.alg)throw hr(Wn,'Invalid "alg" value in ID_TOKEN');v=void 0,i.label=2;case 2:return i.trys.push([2,4,,5]),[4,Cs(p,d,f)];case 3:return v=i.sent(),[3,5];case 4:throw m=i.sent(),hr(Wn,"".concat("Failed to use Crypto API to verify ID_TOKEN",": ").concat(m));case 5:if(v){if(w=l.iss!=="https://access.".concat("line.me"),y=l.aud!==t,g=1e3*l.exp<Date.now(),w)throw hr(Wn,'Invalid "iss" value in ID_TOKEN');if(y)throw hr(Wn,'Invalid "aud" value in ID_TOKEN');if(g)throw hr(Wn,'Invalid "exp" value in ID_TOKEN');return[2,l]}throw hr(Wn,"Invalid signature in ID_TOKEN");case 6:throw hr(Wn,'Invalid "kid" value in ID_TOKEN');case 7:return[2]}}))}))}function Os(e){var t=e.split(".");if(t[1])try{var n=t[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(window.atob(n))}catch(Ua){return null}return null}function Ps(e){var t=e.pathname,n=e.query,r=n?"?".concat(yr(n)):"",o="".concat("liff://").concat(t).concat(r);location.href=o}var xs=null;function _s(){"boolean"==typeof xs&&In.warn("liff.init is not expected to be called more than once"),xs=!!Boolean(Fr(Gn.IS_SUBSEQUENT_LIFF_APP))||!(!Ur()||wr(window.location.hash).feature_token||Gr())&&(function(e){Nr(Gn.IS_SUBSEQUENT_LIFF_APP,e)}(!0),!0)}function ks(){return Boolean(xs)}function As(e,t){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return(n=Vr())?[2,n]:e&&t?[4,Xi({msit:e,mstVerifier:t})]:[3,2];case 1:return[2,r.sent().mst];case 2:return[2,null]}}))}))}function Rs(e){return jo("".concat(Bo("apps"),"/").concat(e,"/featureToken"))}function Ls(e){return o(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return t=wr(window.location.hash),n=function(e){for(var t,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var i=function(t){Object.keys(t).filter((function(e){return null!==t[e]&&void 0!==t[e]})).forEach((function(n){e[n]=t[n]}))};try{for(var a=s(r),c=a.next();!c.done;c=a.next())i(c.value)}catch(Ra){t={error:Ra}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return e}({access_token:Qr(),context_token:Fr(Gn.RAW_CONTEXT),feature_token:Gr(),id_token:$r(),client_id:Fr(Gn.CLIENT_ID),mst_challenge:Kr(),mst_verifier:Fr(Gn.MST_VERIFIER),msit:Fr(Gn.MSIT)},t),ks()?so()?[4,Rs(e)]:[3,2]:[3,3];case 1:r=i.sent().featureToken,n.feature_token||(n.feature_token=r),i.label=2;case 2:(o=pr(e))&&(n.client_id=o),i.label=3;case 3:return[2,n]}}))}))}function Us(e){if(e.persisted&&Co("multipleLiffTransition"))if("ios"===mo())window.location.reload();else{var t=jr().liffId,n=Gr();if(!t)throw hr(Nn,"Invalid LIFF ID.");if(!n)throw hr(Dn,"Invalid featureToken for client features");Ps({pathname:"app/".concat(t),query:{feature_token:n}})}}function js(e){var t,n;return o(this,void 0,void 0,(function(){var r,o,s,a,c,u,l,f,d,h,p,v,m,w,y,g,b;return i(this,(function(i){switch(i.label){case 0:return[4,new Promise((function(e){var t=vo();if(!t||rr(t,"9.5.0")<0)e();else if(window._liff&&window._liff.features)e();else{In.debug("cannot find window._liff.features, listen to ready event");var n=function(){In.debug("ready event is fired"),oi("ready",n),e()};ri("ready",n)}}))];case 1:return i.sent(),_s(),[4,Ls(e.liffId)];case 2:if(r=i.sent(),o=r.access_token,s=r.context_token,a=r.feature_token,c=r.id_token,u=r.client_id,l=r.mst_verifier,f=r.mst_challenge,d=r.msit,s){if("string"!=typeof s)throw hr(Nn,"Cannot get context token, perhaps there is an incorrect parameter in permanent link");Br(Os(s))}if(void 0!==(null===(t=Dr())||void 0===t?void 0:t.liffId)&&(null===(n=Dr())||void 0===n?void 0:n.liffId)!==e.liffId)throw hr(Nn,"Invalid LIFF ID");return!po()&&a&&(function(e,t){Co("multipleLiffTransition")&&Ps({pathname:"app/".concat(e),query:{feature_token:t}})}(e.liffId,a),ks()&&Jr(a)),f&&function(e){Nr(Gn.MST_CHALLENGE,e)}(f),l&&function(e){Nr(Gn.MST_VERIFIER,e)}(l),u&&zr(u),d&&function(e){Nr(Gn.MSIT,e)}(d),window.addEventListener("pageshow",Us),so()||a&&o?[3,5]:ks()?(h=Er(location.href,{"liff.hback":"2"}),as({redirectUri:h}),[4,new Promise((function(){}))]):[3,4];case 3:i.sent(),i.label=4;case 4:throw as(),hr(Nn,"Failed to parse feature_token or access_token");case 5:return o&&a?[4,Wo(o)]:[3,7];case 6:if(p=i.sent(),v=p.client_id,m=p.expires_in,w=pr(e.liffId),v!==w)throw as(),hr(Nn,"Failed to verify access_token");Jr(a),no(new Date(Date.now()+1e3*m)),Yr(o),i.label=7;case 7:return[4,As(d,l)];case 8:return(y=i.sent())?(function(e){Nr(Gn.MST,e)}(y),[4,Qi({mst:y})]):[3,10];case 9:(g=i.sent().data)&&Hr(JSON.stringify(g)),i.label=10;case 10:return c&&!$r()&&Xr(c),c&&u&&!ro()?[4,Is(c,u)]:[3,12];case 11:(b=i.sent())&&oo(b),i.label=12;case 12:return[2]}}))}))}function Fs(e){return o(this,void 0,void 0,(function(){var t,n,r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:return t=Bo("apps"),n="".concat(t,"/").concat(e,"/contextToken"),r=Qr(),o={"Content-Type":"application/json",Accept:"application/json"},r&&(o.Authorization="Bearer ".concat(r)),[4,jo(n,{headers:o})];case 1:if(s=i.sent(),!(a=s.contextToken))throw hr(Nn,"Can not get context from server.");if(!(c=Os(a)))throw hr(Nn,"Invalid context token.");return[2,c]}}))}))}function Ns(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:if(!(e=jr().liffId))throw hr(Nn,"Invalid LIFF ID.");return[4,Fs(e)];case 1:return Br(t.sent()),[2]}}))}))}function Ds(e){return o(this,void 0,void 0,(function(){var t,n,r,s=this;return i(this,(function(a){switch(a.label){case 0:t=function(){return o(s,void 0,void 0,(function(){var t,n,r,o,s,a;return i(this,(function(i){switch(i.label){case 0:return[4,(c=jr(),u=wr(window.location.search),l=eo(),f={grant_type:"authorization_code",client_id:u.liffClientId,appId:c.liffId,code:u.code,code_verifier:l.codeVerifier,redirect_uri:c.redirectUri||u.liffRedirectUri,id_token_key_type:"JWK"},d=yr(f),jo(Bo("token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:d}))];case 1:return t=i.sent(),n=t.access_token,r=t.id_token,o=t.expires_in,zr(e),Yr(n),no(new Date(Date.now()+1e3*o)),to(),r?(Xr(r),[4,Is(r,e)]):[3,3];case 2:(s=i.sent())&&oo(s),i.label=3;case 3:return(a=wr(location.hash).context_token)?(Br(Os(a)),[3,6]):[3,4];case 4:return[4,Ns()];case 5:i.sent(),i.label=6;case 6:return[2]}var c,u,l,f,d}))}))},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,t()];case 2:return a.sent(),[3,4];case 3:throw n=a.sent(),r=n,to(),r;case 4:return[2]}}))}))}function Bs(){return o(this,void 0,void 0,(function(){var e,t,n,r,s,a,c=this;return i(this,(function(u){switch(u.label){case 0:return(t=Pi())?[3,2]:[4,Oi(Go)];case 1:t=u.sent(),u.label=2;case 2:return(e=t).isReady()?(n=br(8),[4,e.getData("appData")]):[3,8];case 3:return r=u.sent(),s=r.eventName,a=r.data,s!==Ho.NOT_FOUND?[3,6]:[4,e.teardown()];case 4:return u.sent(),[4,Bs()];case 5:return[2,u.sent()];case 6:a&&Hr(JSON.stringify(a)),u.label=7;case 7:return e.listen((function(t){return o(c,void 0,void 0,(function(){var r,o;return i(this,(function(i){return r=t.context,o=r.data,r.eventName===Qn.INIT&&(null==o?void 0:o.subWindowId)!==n&&ai(),r.eventName!==Qn.CANCEL&&r.eventName!==Qn.SUBMIT||e.teardown(),[2]}))}))})),so()&&e.send({eventName:Qn.INIT,data:{subWindowId:n,hasOpener:!!window.opener}}),[3,10];case 8:return ki()?[3,10]:[4,new Promise((function(e){window.addEventListener("message",function(e){return function t(n){var r=n.data,o=n.source,i=n.origin;if(r){var s=r.type,a=r.message;s===Zn&&(window.removeEventListener("message",t),a&&Hr(a),function(e){_i.setItem("mainWindowOrigin",e)}(i),o&&o.postMessage&&o.postMessage({status:Zn},i),e())}}}(e))}))];case 9:return[2,u.sent()];case 10:return[2]}}))}))}var Ws=new(function(){function e(){var e=this;this.getAndValidateContext=function(){var e=Dr();if(!e)throw hr(Nn,"Could not get Context from server.");if(!e.endpointUrl)throw hr(Nn,"Could not get endpointUrl from server.");if(!e.permanentLinkPattern)throw hr(Nn,"Could not get permanentLinkPattern from server.");return e},this.decodeState=function(t){var n=e.getAndValidateContext();t=t.replace(/\n/g,"%0D%0A");var r=!n.endpointUrl.startsWith("/?")&&n.endpointUrl.includes("/?")||!n.endpointUrl.startsWith("/#")&&n.endpointUrl.includes("/#")||n.endpointUrl.endsWith("/")||!t.startsWith("/?")&&t.includes("/?")||!t.startsWith("/#")&&t.includes("/#")||t.endsWith("/"),o=new URL(n.endpointUrl),i=o.origin,s=o.pathname,a=o.search,c=new URL("".concat(i).concat(e.attachSlashAtStart(t))),u=c.pathname,l=c.search,f=c.hash,d="".concat(a).concat(a?l.replace(/\?/g,"&"):l),h="".concat(s).concat(e.attachSlashAtStart(u)).replace("//","/");return(h=e.attachSlashAtStart("".concat(h))).endsWith("/")&&!r&&(h=h.substring(0,h.length-1)),"".concat(i).concat(h).concat(d).concat(f).replace(/%0D%0A/g,"\n")}}return e.prototype.attachSlashAtStart=function(e){return"".concat(e&&e.length>0&&!e.startsWith("/")?"/":"").concat(e)},e.prototype.invoke=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,o;return i(this,(function(i){switch(i.label){case 0:if(e=wr(window.location.search),"string"!=typeof(t=e["liff.state"]))return[2];i.label=1;case 1:return i.trys.push([1,4,,5]),n=location.href,(r=this.decodeState(t))===n?[3,3]:(e["liff.hback"]?location.replace(Er(r,{"liff.hback":e["liff.hback"]})):location.replace(r),[4,new Promise((function(){}))]);case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:if((o=i.sent()).code===Nn)throw o;return In.debug(o),[3,5];case 5:return[2]}}))}))},e}());function Ms(e,t){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:if(!e.liffId)throw hr(Bn,"liffId is necessary for liff.init()");return function(e){window.__liffConfig=e}(e),!Ur()&&so()&&(function(){var e=jr();return cr("".concat(Vn,":").concat(Gn.EXPIRES,":").concat(e.liffId))}()||Ro()),n=wr(window.location.search),!po()||Ur()?[3,2]:[4,Bs()];case 1:r.sent(),r.label=2;case 2:if(n.error&&n.liffOAuth2Error)throw s=n.error,a=n.error_description.replace(/\+/g," "),c="".concat(s,": ").concat(a),hr(Nn,c);return o=n.code,i=eo(),Boolean(o&&!so()&&i&&i.codeVerifier)?[4,Ds(n.liffClientId)]:[3,4];case 3:r.sent(),r.label=4;case 4:return Ur()?[4,js(e)]:[3,6];case 5:return r.sent(),[3,8];case 6:return so()?[3,8]:[4,Ns()];case 7:r.sent(),r.label=8;case 8:return[4,Ws.invoke()];case 9:return r.sent(),[4,t()];case 10:return r.sent(),function(e){var t=Tr(Sr(e));window.history.replaceState(history.state,"",t)}(window.location.href),[2]}var o,i,s,a,c}))}))}var qs=function(e,t){return new Promise((function(n,r){if(e){var o=document.createElement("script");o.type="module",o.onload=function(){n()},o.src=e,document.head.appendChild(o)}else r(hr(Bn,t))}))},Hs=function(e){var t="https://static.line-scdn.net/lui/edge/versions/1.13.0/lui-alert.js";return t&&e&&(t=t.replace(/\d{1,2}\.\d{1,2}\.\d{1,3}/,e)),qs(t,"LUI_ALERT_URL is not defined")},Vs=function(){return o(void 0,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=function(){var e,t=document.querySelector('script[src*="luivendor.js"]');if(t&&(null===(e=t.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g))||void 0===e?void 0:e.length))return t.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g)[0]}(),e?[3,2]:[4,qs("https://static.line-scdn.net/lui/edge/versions/1.13.0/luivendor.js","LUI_VENDOR_URL is not defined")];case 1:t.sent(),t.label=2;case 2:return[4,Hs(e)];case 3:return t.sent(),[4,(n=br(6),new Promise((function(){var e=document.createElement("div");e.innerHTML='<lui-alert id="'.concat("liffAlert","-").concat(n,'" shown title="').concat(hs("alert.android.extBrowser.autoLoginWorkaround.title"),'" message="').concat(hs("alert.android.extBrowser.autoLoginWorkaround.desc"),'" button="').concat(hs("alert.android.extBrowser.autoLoginWorkaround.button.text"),'"></lui-alert>'),document.body.appendChild(e);var t=document.getElementById("".concat("liffAlert","-").concat(n));t&&t.addEventListener("lui-button-click",(function(){var e=window.open(Er(window.location.href,{liffIsEscapedFromApp:"true"}),"_blank");e&&(e.location.href=Er(window.location.href,{liffIsEscapedFromApp:"true"}),window.close())}))})))];case 4:return t.sent(),[2]}var n}))}))},Ks=function(e){try{return new URL(e).searchParams.get("lineAppVersion")}catch(jn){return null}};function zs(){var e;return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return(t=null!==(e=Ks(window.location.href))&&void 0!==e?e:Ks(window.document.referrer))&&rr(t,"13.10.0")>=0||Ur()||"android"!==mo()||(n=wr(window.location.search))[Mo]||n.liffIsEscapedFromApp?[2]:n.liffClientId&&document.referrer.includes("access.".concat("line.me"))?(window.location.href=Er(window.location.href,{liffIsEscapedFromApp:"true"}),[2]):n.liffClientId&&document.referrer.includes("android-app://")?[4,Vs()]:[3,2];case 1:r.sent(),r.label=2;case 2:return n.liffClientId&&""===document.referrer&&1===window.history.length?[4,Vs()]:[3,4];case 3:r.sent(),r.label=4;case 4:return!document.referrer.includes("liffClientId")||document.referrer.includes("liffIsEscapedFromApp")?[3,6]:[4,Vs()];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}var Gs=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.hooks={before:new ss,after:new ss},t.internalHooks={beforeFinished:new ss,beforeSuccess:new ss,error:new ss},t}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"init"},enumerable:!1,configurable:!0}),n.prototype.install=function(e){var t=e.liff;return this.liffForWindow=t,this.init.bind(this)},n.prototype.init=function(e,t,n){return o(this,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:return[4,this.hooks.before.call()];case 1:o.sent(),i=this.liffForWindow,window&&!window.liff&&(window.liff=i),o.label=2;case 2:return o.trys.push([2,9,,11]),[4,Promise.all([Ts(this.liffForWindow),Ms(e,this.internalHooks.beforeFinished.call)])];case 3:return o.sent(),function(){var e;bs("color-scheme",((null==(e=Dr())?void 0:e.menuColorSetting)||{adaptableColorSchemes:["light"]}).adaptableColorSchemes.join(" "));var t=window.matchMedia("(prefers-color-scheme: dark)");ys({matches:null==t?void 0:t.matches,media:null==t?void 0:t.media}),t.addEventListener?t.addEventListener("change",ys):t.addListener&&t.addListener(ys)}(),[4,this.internalHooks.beforeSuccess.call()];case 4:return o.sent(),!e.withLoginOnExternalBrowser||so()?[3,6]:(as(),[4,new Promise((function(){}))]);case 5:o.sent(),o.label=6;case 6:return[4,zs()];case 7:return o.sent(),[4,this.hooks.after.call()];case 8:return o.sent(),"function"==typeof t&&t(),En(),[3,11];case 9:return r=o.sent(),[4,this.internalHooks.error.call(r)];case 10:throw o.sent(),"function"==typeof n&&n(r),r;case 11:return[2]}var i}))}))},n}(kn);function Js(){return navigator.language}function $s(){var e=vo();if(!e||!Ur()||"ios"!==mo())return navigator.language;if(rr(e,"14.11.0")>=0){var t=window.prompt("LIFF:GET_APP_LANGUAGE");if(t)return t}return navigator.language}function Xs(e){return o(this,void 0,void 0,(function(){var t,n,r,o,a,c,u;return i(this,(function(i){switch(i.label){case 0:return function(e){if(!er.includes(e))throw hr(Fn,"Unexpected permission name.");var t=Dr();return!!(null==t?void 0:t.scope.includes(e))}(e)?(t=Qr())?[4,Wo(t)]:[3,2]:[2,{state:"unavailable"}];case 1:n=i.sent(),r=unescape(n.scope).split(" ");try{for(o=s(r),a=o.next();!a.done;a=o.next())if(a.value.includes(e))return[2,{state:"granted"}]}catch(l){c={error:l}}finally{try{a&&!a.done&&(u=o.return)&&u.call(o)}finally{if(c)throw c.error}}return[2,{state:"prompt"}];case 2:throw hr(jn,"LiffId is not found.")}}))}))}function Qs(){var e,t,n=Dr();return!!n&&"square_chat"!==n.type&&(Co("skipChannelVerificationScreen")||!Ur()&&(null===(t=null===(e=n.availability)||void 0===e?void 0:e.skipChannelVerificationScreen)||void 0===t?void 0:t.permission))}function Ys(){var e=jr().liffId;if(e)return jo("".concat(Bo("unauthorizedPermissions"),"?liffId=").concat(e),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(Qr())}});throw hr(jn,"liffId is required")}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getLanguage"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return Js()}}}(kn),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getAppLanguage"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return $s()}}}(kn);var Zs,ea=Yi.on,ta=Yi.off,na=Yi.open,ra=function(){function e(e,t){var n=this;this.onSubmit=function(e){var t=e.newAccessToken,r=e.ICA_ERROR;return o(n,void 0,void 0,(function(){return i(this,(function(e){return t?this.resolve({newAccessToken:t}):r&&this.reject(hr(Un,r)),this.teardown(),[2]}))}))},this.onClose=function(){return o(n,void 0,void 0,(function(){return i(this,(function(e){return this.reject(hr(jn,"user didn't allow the agreement")),this.teardown(),[2]}))}))},this.onCancel=function(){return o(n,void 0,void 0,(function(){return i(this,(function(e){return this.reject(hr(jn,"user didn't allow the agreement")),this.teardown(),[2]}))}))},this.onError=function(e){return o(n,void 0,void 0,(function(){return i(this,(function(t){return this.reject(e),this.teardown(),[2]}))}))},this.resolve=e,this.reject=t,this.setup()}return e.prototype.setup=function(){ea("submit",this.onSubmit),ea("close",this.onClose),ea("cancel",this.onCancel),ea("error",this.onError)},e.prototype.teardown=function(){ta("submit",this.onSubmit),ta("close",this.onClose),ta("cancel",this.onCancel),ta("error",this.onError),Zs=void 0},e.prototype.open=function(e){var t=jr().liffId;t?na({url:"".concat("https://liff.line.me/1656032314-Xgrw5Pmk"),appData:{liffId:t,channelId:pr(t),accessToken:Qr()},onBeforeTransition:e}).catch(this.reject):this.reject(hr(jn,"liffId is required"))},e}();function oa(){return o(this,void 0,void 0,(function(){var e,t=this;return i(this,(function(n){switch(n.label){case 0:if(!Qs())throw hr(Dn,"SkipChannelVerificationScreen is unavailable.");return Zs&&Zs.teardown(),e=function(){return o(t,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,Ys()];case 1:if(e=t.sent(),(Ur()?e:e.filter((function(e){return"chat_message.write"!==e}))).length<=0)throw hr(Dn,"All permissions have already been approved.");return[2]}}))}))},[4,new Promise((function(t,n){(Zs=new ra(t,n)).open(e)}))];case 1:return Yr(n.sent().newAccessToken),[2]}}))}))}function ia(e,t){var n=this;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return o(n,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){switch(i.label){case 0:return n=(r.length>0?r[r.length-1]:{}).ignorePermissionCheck,o=void 0!==n&&n,[4,Xs(t)];case 1:if("unavailable"!==(s=i.sent().state))return[3,2];throw hr(Dn,"The permission is not in LIFF app scope.");case 2:return"prompt"!==s||!Qs()||o||!Ur()&&"chat_message.write"===t?[3,4]:[4,oa()];case 3:return i.sent(),[3,5];case 4:o&&r.pop(),i.label=5;case 5:return[4,e.apply(void 0,c([],a(r),!1))];case 6:return[2,i.sent()]}}))}))}}var sa=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"permission"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return{query:Xs,requestAll:oa}},n}(kn),aa=new sa;function ca(){return jo(Bo("profile"))}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getProfile"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return ia(ca,"profile")}}(kn);function ua(e){if(!function(e){if(!e||"object"!=typeof e)return!1;var t=e,n=t.url,r=a([typeof n,typeof t.external],2),o=r[0],i=r[1];return"string"===o&&""!==n&&("undefined"===i||"boolean"===i)}(e))throw hr(Fn,"Invalid parameters for liff.openWindow()");var t=vo();if(Ur())if(null!==t&&"ios"===mo()&&rr(t,"9.19")>=0||!window._liff.postMessage){var n=e.url,r=e.external,o=void 0!==r&&r;window.open(function(e,t){var n,r,o,i,s,c,u,l,f;(function(e){return-1!==e.indexOf("#")&&-1!==e.indexOf("?")&&e.indexOf("#")<e.indexOf("?")})(e)||function(e){return-1===e.indexOf("?")&&-1!==e.indexOf("#")}(e)?(u=(n=a(e.split("#"),2))[0],l=(o=a((void 0===(r=n[1])?"":r).split("?"),2))[0],f=o[1]):(u=(i=a(e.split("?"),2))[0],f=(c=a((void 0===(s=i[1])?"":s).split("#"),2))[0],l=c[1]);var d=function(e,t){return e?"&".concat(e.split("&").filter((function(e){return-1===e.indexOf("is_liff_external_open_window")})).join("&").concat("".concat(t?"#".concat(t):""))):"".concat(t?"#".concat(t):"")}(f,l);return"".concat(u,"?").concat("is_liff_external_open_window","=").concat(!!t).concat(d)}(n,o))}else si("openWindow",e);else window.open(e.url,"_blank")}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"openWindow"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(e){return ua(e)}}}(kn);var la=function(e){return"object"==typeof e&&null!==e&&function(e){return"string"==typeof e||e instanceof String}(e.type)};function fa(e){return Promise.reject(hr(Fn,e))}function da(e){if(!function(e){return Array.isArray(e)&&e.every(la)}(e))return fa("Parameter 'messages' must be an array of { type, ... }");var t=e.length;return t<1||t>5?fa("Number of messages should be in range 1 to ".concat(5,".")):jo(Bo("message"),{method:"POST",body:JSON.stringify({messages:e})}).catch(ha)}var ha=function(e){if("403"===e.code){var t="12.0.0"===vo(),n="ios"===mo(),r=_r();t&&(n||r)&&window.alert("LINEアプリをLINE 12.0.1以降にアップデートしてください。\nPlease update your LINE app to LINE 12.0.1 or later.")}throw e};function pa(){return jo(Bo("friendship"))}function va(){return o(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:if(!so())return[3,6];n.label=1;case 1:return n.trys.push([1,5,,6]),(e=ro())&&e.sub?[2,e.sub]:[3,2];case 2:return[4,ca()];case 3:if((t=n.sent())&&t.userId)return[2,t.userId];n.label=4;case 4:return[3,6];case 5:return n.sent(),In.debug("can't retrieve Mid/Uid because of something wrong"),[3,6];case 6:return[2]}}))}))}function ma(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,va()];case 1:return(e=t.sent())&&"u"===e.substring(0,1)?[2,e]:[2]}}))}))}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"sendMessages"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return ia(da,"chat_message.write")}}(kn),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getFriendship"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return ia(pa,"profile")}}(kn);var wa,ya=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.utsExtra={isLiffSuccessful:!1,isLoggedIn:!1,id:"",version:""},t.injected=!1,t}return t(n,e),Object.defineProperty(n,"CUSTOMPLACEID_INIT",{get:function(){return"liff.init"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"CUSTOMTYPE",{get:function(){return"liffSdk"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"LiffUtsLoginStatus",{get:function(){return{isLoggedIn:1,isLiffSuccessful:2}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return"analytics"},enumerable:!1,configurable:!0}),n.prototype.install=function(e){var t=e.liff,n=e.internalHooks;this.liffCore=t,n.init.beforeFinished(this.beforeInitFinished.bind(this)),n.init.beforeSuccess(this.beforeInitSuccess.bind(this)),n.init.error(this.initError.bind(this))},n.prototype.changeRatioToUTSFormat=function(e){if(e&&Number.isFinite(e))return Math.round(100*e)},n.prototype.setExtra=function(){var e,t=this.utsExtra,r=t.isLiffSuccessful,o=t.isLoggedIn,i=t.id,s=t.version,a=(o?n.LiffUtsLoginStatus.isLoggedIn:0)|(r?n.LiffUtsLoginStatus.isLiffSuccessful:0);null===(e=this.uts)||void 0===e||e.setExtra("liff",{id:i,loginStatus:a,version:s})},n.prototype.assignUtsExtra=function(e){Object.assign(this.utsExtra,e)},n.prototype.setVersion=function(e){this.assignUtsExtra({version:e}),In.debug("[LIFFUTS][SDK version] ".concat(e)),this.setExtra()},n.prototype.setLiffId=function(e){this.assignUtsExtra({id:e}),In.debug("[LIFFUTS][LIFFID] ".concat(e)),this.setExtra()},n.prototype.setIsLoggedIn=function(e){this.assignUtsExtra({isLoggedIn:e}),In.debug("[LIFFUTS][isLoggedIn] ".concat(e)),this.setExtra()},n.prototype.sendLiffInit=function(){var e;In.debug("[LIFFUTS][sendCustom] liff.init"),null===(e=this.uts)||void 0===e||e.sendCustom({type:n.CUSTOMTYPE,params:{placeId:n.CUSTOMPLACEID_INIT}})},n.prototype.setIsLiffSuccessful=function(e){this.assignUtsExtra({isLiffSuccessful:e}),In.debug("[LIFFUTS][isLiffInitSuccessful] ".concat(e)),this.setExtra()},n.prototype.prepareReferrer=function(e){var t={};Object.keys(e).forEach((function(n){if(Xn.includes(n)){var r=e[n];"string"==typeof r&&r&&(t[n.replace(/^liff\.ref\./,"")]=r)}})),Object.keys(t).length>0&&(this.referrer=t)},n.prototype.beforeInitFinished=function(){return o(this,void 0,void 0,(function(){var e,t,n,o,s,a,c,u,l,f,d,h;return i(this,(function(i){switch(i.label){case 0:if(e=wr(window.location.search),this.prepareReferrer(e),t=Dr(),!(n=null==t?void 0:t.utsTracking))return[2];if(o=jr(),s=o.liffId,a=o.analytics,"auto"!==n.mode||!a)return[3,6];In.debug("[LIFFUTS] ".concat((new Date).toUTCString())),i.label=1;case 1:return i.trys.push([1,3,,4]),c=this,[4,new Promise((function(e,t){var n=window.uts,r=document.createElement("script");r.type="text/javascript",r.src="https://static.line-scdn.net/uts/edge/4.1.0/uts.js",r.onload=function(){var t=window.uts;e(t),window.uts=n},r.onerror=function(e){t(e)},document.getElementsByTagName("head")[0].appendChild(r)}))];case 2:return c.uts=i.sent(),[3,4];case 3:return u=i.sent(),In.debug("[LIFFUTS] cannot load UTS, reason: ".concat(u)),[2];case 4:return l=r(r({},a.context),{utsId:a.context.utsId,appName:a.context.appName,appEnv:a.context.appEnv||"release"}),f=r(r({endpoint:"https://uts-front.line-apps.com"},a.options),{sampleRate:this.changeRatioToUTSFormat(n.sendRatio),version:"current"}),this.uts.init(l,f),[4,ma()];case 5:(d=i.sent())&&(In.debug("[LIFFUTS][mid] ".concat(d)),this.uts.setMid(d)),(null==t?void 0:t.tid)&&(In.debug("[LIFFUTS][tid] ".concat(t.tid)),this.uts.setTid(t.tid)),this.referrer&&(In.debug("liff.ref.referrer",this.referrer),this.uts.setSessionParams(this.referrer)),s&&this.setLiffId(s),this.setIsLoggedIn(so()),this.setVersion("2.25.0"),h=Sr(location.href),In.debug("[LIFFUTS][url] ".concat(h)),this.uts.setUrl(h),this.liffCore.analytics=this.uts,this.injected=!0,i.label=6;case 6:return[2]}}))}))},n.prototype.beforeInitSuccess=function(){return this.injected&&(this.setIsLiffSuccessful(!0),this.sendLiffInit()),Promise.resolve()},n.prototype.initError=function(){return this.injected&&(this.setIsLiffSuccessful(!1),this.sendLiffInit()),Promise.resolve()},n}(kn),ga=/([\x90\x9D\x81\x8D\x8F<"{|}>\\^`“›„•‚ŽŠ…’—ž–‘”‡™‰ŒšŸ‹œ†¥¿©áÄýÍÎðô]|\n|.*#.*#|%(?![0-9A-Fa-f]{2})[^%]{0,2})/,ba=function(e){if(ga.test(e))throw hr(Fn,"invalid URL.");var t=new URL(e),n=t.username,r=t.password,o=t.hash,i=t.search;return{username:n,password:r,pathname:t.pathname,hash:o,origin:t.origin,search:i}},Sa=function(e){return e.substring(1).split("&").filter((function(e){return!/^liff\./.test(e)&&Boolean(e)}))},Ta=function(e,t){var n=e.substring(t.length);return"/"===n?"":(n.length>0&&"/"!==n[0]&&(n="/"+n),n)},Ea=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))},Ca=function(e,t){var n=function(e,t){for(var n=c([],a(e),!1),r=0;r<t.length;r++){var o=t[r],i=n.indexOf(o);i>-1&&n.splice(i,1)}return n}(function(e){var t,n,r=e.replace(/\+/g,"%2B"),o=new URLSearchParams(r),i=[];try{for(var c=s(o.entries()),u=c.next();!u.done;u=c.next()){var l=a(u.value,2),f=l[0],d=l[1];i.push("".concat(Ea(f),"=").concat(Ea(d)))}}catch(p){t={error:p}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}if(0===i.length)return[""];var h=e.split("&");return i.map((function(e,t){return e.endsWith("=")&&!h[t].endsWith("=")?e.slice(0,-1):e}))}(Sa(e).join("&")),Sa(t)).join("&");return""!==n?"?".concat(n):""},Ia=function(e){var t=new RegExp("^".concat($n.join("|"))),n=e.substring(1).split("&").filter((function(e){return!t.test(e)&&Boolean(e)})).join("&");return n?"#".concat(n):""},Oa=function(e,t){return 0===t.indexOf(e)&&(e.endsWith("/")&&(e=e.substring(0,e.length-1)),void 0===t[e.length]||"/"===t[e.length])},Pa=function(e,t){var n=ba(e),r=new URL(t);if(n.username!==r.username||n.password!==r.password)throw hr(Fn,"invalid URL.");if(r.origin!==n.origin||!Oa(r.pathname,n.pathname))throw hr(Fn,"invalid URL.")},xa=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.extraParams="",t.getAndValidateContext=function(){var e=Dr();if(!e)throw hr(Nn,"Could not get Context from server.");if(!e.endpointUrl)throw hr(Nn,"Could not get endpointUrl from server.");if(!e.permanentLinkPattern)throw hr(Nn,"Could not get permanentLinkPattern from server.");return e},t.createUrl=function(){var e=t.getAndValidateContext(),n=window.location,r=n.pathname,o=n.search,i=n.hash,s=n.origin,a=new URL(e.endpointUrl);if(a.origin!==s||!Oa(a.pathname,r))throw hr(Bn,"Current page is not under entrypoint.");var c=r.substring(a.pathname.length);c.length>0&&"/"!==c[0]&&(c="/"+c);var u=new RegExp("^".concat($n.join("|"))),l=i.substring(1).split("&").filter((function(e){return!u.test(e)&&Boolean(e)})).join("&"),f=l===a.hash.substring(1)?"":l,d=function(e){return e.substring(1).split("&").filter((function(e){return!/liff\.state/.test(e)&&Boolean(e)}))},h=d(o),p=d(a.search);t.extraParams&&h.push(t.extraParams);for(var v=0;v<p.length;v++){var m=p[v],w=h.indexOf(m);w>-1&&h.splice(w,1)}var y=h.join("&"),g="".concat(c).concat(""!==y?"?".concat(y):"").concat(f?"#".concat(f):"");return"".concat(Kn).concat(jr().liffId).concat(g)},t.createUrlBy=function(e){return o(t,void 0,void 0,(function(){var t,n,r,o,s,a;return i(this,(function(i){if(!(t=jr().liffId))throw hr(Nn,"Should run after liff init.");return n=this.getAndValidateContext(),Pa(e,n.endpointUrl),r=ba(e),o=new URL(n.endpointUrl),s=n.miniDomainAllowed?zn:Kn,a=n.miniDomainAllowed&&n.miniAppId?n.miniAppId:t,[2,s.concat(a,Ta(r.pathname,o.pathname),Ca(r.search,o.search),Ia(r.hash))]}))}))},t.setExtraQueryParam=function(e){t.extraParams=e},t.install=function(){return{createUrl:t.createUrl,createUrlBy:t.createUrlBy,setExtraQueryParam:t.setExtraQueryParam}},t}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"permanentLink"},enumerable:!1,configurable:!0}),n}(kn),_a=new xa,ka=function(){function e(e,t){var n=this;this.resolve=e,this.reject=t,this.onSubmit=function(e){var t=e.message;n.resolve({value:t}),n.destroy()},this.onClose=function(){n.resolve({value:null}),n.destroy()},this.onCancel=function(){n.resolve({value:null}),n.destroy()},this.onError=function(e){n.reject(e),n.destroy()},this.start()}return e.prototype.start=function(){Yi.on("submit",this.onSubmit),Yi.on("close",this.onClose),Yi.on("cancel",this.onCancel),Yi.on("error",this.onError)},e.prototype.destroy=function(){Yi.off("submit",this.onSubmit),Yi.off("close",this.onClose),Yi.off("cancel",this.onCancel),Yi.off("error",this.onError),wa=void 0},e}();function Aa(){return o(this,void 0,void 0,(function(){return i(this,(function(e){return Eo.scanCodeV2(),wa&&wa.destroy(),[2,new Promise((function(e,t){wa=new ka(e,t),Yi.open({url:"https://liff.line.me/1656359117-jxmx5e11"}).catch((function(e){null==wa||wa.destroy(),t(e)}))}))]}))}))}var Ra=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"scanCodeV2"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return Aa},n}(kn),La=new Ra,Ua={};function ja(){return Ua}function Fa(e,t){var n=ja(),r=a(t.split("."),1)[0],o=n[t];o&&e.removeEventListener(r,o),n[t]=null}var Na=!1,Da=!1;function Ba(e,t,n,r){Na||(Da=function(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){return e=!0,!1}});window.addEventListener("test",n,n),window.removeEventListener("test",n,n)}catch(t){e=!1}return e}(),Na=!0);var o=a(t.split("."),1)[0];return new Promise((function(i){var s=function(e){i(e),n&&n(e)};!function(e,t){Ua[e]=t}(t,s),e.addEventListener(o,s,!!Da&&r)}))}function Wa(e,t,n,r){if(void 0===n&&(n={}),"object"!=typeof e||!e.postMessage)throw hr(Fn,"target must be window object");if("string"!=typeof t)throw hr(Fn,"keyname must be string");if("object"!=typeof n)throw hr(Fn,"incorrect body format. It should be Object or Array comprised of Object");if(!r)throw hr(Fn,"serverEndPointUrl isn't passed. please fill up with proper url");if("*"===r)throw new Error("serverEndPointUrl doesn't allow to set '*'");var o={name:t,body:n};e.postMessage(o,r)}var Ma=function(){function e(){this.payloadToShareTargetPicker=null,this.popupWindow=null,this.doesWaitForSubwindowResult=!1}return e.getInstance=function(){return e.instance?e.instance.reset():e.instance=new e,e.instance},e.prototype.init=function(e){return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.liffId=e.referrer.liffId,this.doesWaitForSubwindowResult=!(!e.options||!e.options.waitForSubwindowResult),this.allowPostMessageOrigin=this.initAllowPostMessageOrigin(),this.payloadToShareTargetPicker=this.buildPayloadToShareTargetPicker(e),window.AbortController&&(this.abortController=new window.AbortController),this.prepareAnotherWindow(),[4,this.initOtt()];case 1:return r.sent(),this.initListener(),this.openAnotherWindow(),this.doesWaitForSubwindowResult?[4,this.pollingShareResult()]:[3,3];case 2:return t=r.sent(),this.finalize(),[2,t];case 3:case 6:return[2];case 4:return[3,6];case 5:if(n=r.sent(),this.finalize(),"AbortError"!==n.name)throw n;return[3,6]}}))}))},e.prototype.resetAllVariables=function(){this.liffId="",this.allowPostMessageOrigin="",this.payloadToShareTargetPicker=null,this.ott="",this.popupWindow=null,this.timeoutIDForHealthCheck=null,this.abortController=null,this.internalError=null,this.doesWaitForSubwindowResult=!1},e.prototype.reset=function(){this.finalize(),this.resetAllVariables()},e.prototype.finalize=function(){var e,t;this.abortController&&this.abortController.abort(),Ur()||(e=this.timeoutIDForHealthCheck,t=this.popupWindow,Fa(window,"message.receivedHealthcheck"),e&&clearTimeout(e),t&&!t.closed&&t.close())},e.prototype.buildPayloadToShareTargetPicker=function(e){return{messages:e.messages,isMultiple:e.isMultiple,referrer:e.referrer}},e.prototype.initAllowPostMessageOrigin=function(e){return void 0===e&&(e=Bo("shareTargetPicker")),function(e){var t=e.match(/^(https?:\/\/.*?)\//);return t&&t[1]||""}(e)},e.prototype.initOtt=function(){return o(this,void 0,void 0,(function(){var e,t,n;return i(this,(function(r){switch(r.label){case 0:return this.abortController&&(e=this.abortController.signal),t="".concat(Bo("shareTargetPickerOtt"),"/").concat(this.liffId,"/ott"),n=this,[4,jo(t,{method:"GET",signal:e}).then((function(e){return e.ott}))];case 1:return n.ott=r.sent(),[2]}}))}))},e.prototype.prepareAnotherWindow=function(){Ur()||("ios"!==mo()||_r()?this.popupWindow=window.open("","liffpopup","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):this.popupWindow=window.open())},e.prototype.openAnotherWindow=function(){if(Ur()&&this.payloadToShareTargetPicker)e=this.liffId,t=this.ott,n=this.payloadToShareTargetPicker,r={liffId:e,ott:t,data:JSON.stringify(n),closeModals:!1},location.href="".concat("line://picker","?").concat(yr(r));else{if(this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),!this.popupWindow)throw hr(Mn);!function(e,t,n){var r={liffId:t,ott:n};e.location.href="".concat(Bo("shareTargetPicker"),"?").concat(yr(r))}(this.popupWindow,this.liffId,this.ott)}var e,t,n,r},e.prototype.initListener=function(){var e,t;Ur()||(e=this.onReceivedHealthcheck.bind(this),t=this.allowPostMessageOrigin,function(e,t,n,r){Ba(e,"message.".concat(t),function(e,t,n){return function(r){In.debug("messageReceive",r),r.origin===n&&r.data.name===e&&t(r)}}(t,n,r))}(window,"receivedHealthcheck",e,t))},e.prototype.healthCheck=function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:if(this.popupWindow&&!this.popupWindow.closed)return[3,7];if(!this.doesWaitForSubwindowResult)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.onCanceled()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),this.internalError=e,[3,4];case 4:return[3,6];case 5:this.finalize(),t.label=6;case 6:return[3,8];case 7:Wa(this.popupWindow,"healthcheck",void 0,this.allowPostMessageOrigin),this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),t.label=8;case 8:return[2]}}))}))},e.prototype.onReceivedHealthcheck=function(){if(!this.popupWindow||!this.payloadToShareTargetPicker)throw hr(Mn);Wa(this.popupWindow,"ready",this.payloadToShareTargetPicker,this.allowPostMessageOrigin)},e.prototype.onCanceled=function(){return o(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:if(Ur()||!this.ott)throw new Error("need to call with ott in client");return this.abortController&&(e=this.abortController.signal),t={liffId:this.liffId,ott:this.ott},[4,jo("".concat(Bo("shareTargetPickerResult"),"?").concat(yr(t)),{method:"POST",signal:e,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:"result=CANCEL"})];case 1:return[2,"ok"===n.sent().status]}}))}))},e.prototype.getShareResult=function(){return o(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){if(!this.ott)throw new Error("need to call with ott in client");return this.abortController&&(e=this.abortController.signal),t={liffId:this.liffId,ott:this.ott},In.debug("fetch: getShareResult"),[2,jo("".concat(Bo("shareTargetPickerResult"),"?").concat(yr(t)),{method:"GET",headers:{Accept:"application/json"},signal:e})]}))}))},e.isPollingTimeOut=function(e,t){return(t-e)/6e4>=10},e.prototype.pollingShareResult=function(){return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t=Date.now(),r.label=1;case 1:if(e.isPollingTimeOut(t,Date.now()))return[3,4];if(this.internalError)throw this.internalError;return[4,this.getShareResult()];case 2:if((n=r.sent())&&n.result)switch(n.result){case"SUCCESS":return[2,{status:"success"}];case"CANCEL":return[2];default:throw new Error(n.resultDescription)}return[4,new Promise((function(e){setTimeout(e,500)}))];case 3:return r.sent(),[3,1];case 4:throw new Error("Timeout: not finished within ".concat(10,"min"))}}))}))},e}(),qa=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.shareTargetPicker=function(e,n){return void 0===n&&(n={}),o(t,void 0,void 0,(function(){var t,r,o,s,a,c,u;return i(this,(function(i){switch(i.label){case 0:if(Eo.shareTargetPicker(),!e||!Array.isArray(e)||0===e.length)throw hr(Fn,"no proper argument");if(e.length>5)throw hr(Fn,"exceed the limit of num of messages");if(!(t=jr().liffId))throw hr(Bn);window.liff&&(r=window.liff).analytics&&function(e){In.debug("[LIFFUTS][sendCustom] liff.shareTargetPicker"),e.sendCustom({type:"liffSdk",params:{placeId:"liff.shareTargetPicker"}})}(r.analytics),o=void 0===n.isMultiple||n.isMultiple,i.label=1;case 1:return i.trys.push([1,3,,4]),s=Ma.getInstance(),a=vo(),c={waitForSubwindowResult:!0},Ur()&&a&&rr(a,"10.11.0")<0&&(c.waitForSubwindowResult=!1),[4,s.init({messages:e,isMultiple:o,referrer:{liffId:t,url:location.origin},options:c})];case 2:return[2,i.sent()];case 3:throw(u=i.sent())instanceof dr?u:hr(qn,u.message);case 4:return[2]}}))}))},t}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"shareTargetPicker"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return this.shareTargetPicker},n}(kn),Ha=new qa;function Va(e,t){return o(this,void 0,void 0,(function(){var n,r;return i(this,(function(o){switch(o.label){case 0:return n=Bo("createShortcutOnHomeScreen"),(r=new URL(n)).searchParams.append("liffId",e),r.searchParams.append("url",t.url),t.description&&r.searchParams.append("description",t.description),[4,jo(r.toString())];case 1:return[2,o.sent().shortcutPageUrl]}}))}))}function Ka(e){if(xr(e))throw hr(Fn,"LINE URL scheme are not supported in the current environment.")}function za(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return Ur()?[2]:[4,new Promise((function(e){setTimeout(e,1e3)}))];case 1:return n.sent(),"hidden"===document.visibilityState?[2]:(Ka(t.url),[4,Va(e,t)]);case 2:return ua({url:n.sent(),external:!0}),[2]}}))}))}function Ga(e,t){return o(this,void 0,void 0,(function(){var n,r;return i(this,(function(o){switch(o.label){case 0:return n={liffId:e,targetUrl:t.url,description:t.description},r="".concat("line://shortcut/liff","?").concat(yr(n)),location.href=r,[4,za(e,t)];case 1:return o.sent(),[2]}}))}))}function Ja(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return Ka(t.url),[4,Va(e,t)];case 1:return ua({url:n.sent(),external:!0}),[2]}}))}))}function $a(e){var t;if(void 0===e.url||null===e.url||""===e.url)throw hr(Fn,"no proper argument");var n=Dr();if(!(null===(t=null==n?void 0:n.availability.addToHomeLineScheme)||void 0===t?void 0:t.permission)){if(xr(e.url))throw hr(Dn,"No permission to specify line schema in url.");if(e.description)throw hr(Dn,"No permission to specify description.")}if(!xr(e.url)){if(!n)throw hr(Dn,"Could not get Context from server.");n.liffId!==Or(e.url)&&Pa(e.url,n.endpointUrl)}}function Xa(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:if(!(t=jr().liffId))throw hr(Nn,"Invalid LIFF ID.");return"ios"===mo()?[4,Ja(t,e)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,Ga(t,e)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))}var Qa=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"createShortcutOnHomeScreen"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(e){return function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return $a(e),Eo.createShortcutOnHomeScreen(),[4,Xa(e)];case 1:return t.sent(),[2]}}))}))}(e)}},n}(kn),Ya=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"internalCreateShortcutOnHomeScreen"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(e){return function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return $a(e),Eo.internalCreateShortcutOnHomeScreen(),[4,Xa(e)];case 1:return t.sent(),[2]}}))}))}(e)}},n}(kn),Za=Object.defineProperties({},{getOS:{value:mo,enumerable:!0,writable:!0},getVersion:{value:ao,enumerable:!0,writable:!0},getLanguage:{value:Js,enumerable:!0,writable:!0},getAppLanguage:{value:$s,enumerable:!0,writable:!0},isInClient:{value:Ur,enumerable:!0,writable:!0},isLoggedIn:{value:so,enumerable:!0,writable:!0},logout:{value:Ro,enumerable:!0,writable:!0},getAccessToken:{value:Qr,enumerable:!0,writable:!0},getIDToken:{value:$r,enumerable:!0,writable:!0},getDecodedIDToken:{value:ro,enumerable:!0,writable:!0},getContext:{value:Dr,enumerable:!0,writable:!0},openWindow:{value:ua,enumerable:!0,writable:!0},closeWindow:{value:ai,enumerable:!0,writable:!0},getFriendship:{value:ia(pa,"profile"),enumerable:!0,writable:!0},getAId:{value:Wr,enumerable:!0,writable:!0},getProfilePlus:{value:qr,enumerable:!0,writable:!0},getIsVideoAutoPlay:{value:Mr,enumerable:!0,writable:!0},getLineVersion:{value:vo,enumerable:!0,writable:!0},isApiAvailable:{value:Co,enumerable:!0,writable:!0},getProfile:{value:ia(ca,"profile"),enumerable:!0,writable:!0},sendMessages:{value:ia(da,"chat_message.write"),enumerable:!0,writable:!0},subWindow:{value:Yi,enumerable:!0,writable:!0},ready:{value:Ln,enumerable:!0,writable:!0},id:{get:function(){return jr().liffId||null},enumerable:!0},_dispatchEvent:{value:function(e){var t={};try{t=JSON.parse(e)}catch(Js){throw hr(Fn,Js.message)}var n=function(e){return new CustomEvent(Hn,{detail:e})}(t);In.debug("[client dispatchEvent to js]",{type:n.type,detail:n.detail}),window.dispatchEvent(n)},enumerable:!0,writable:!0},_call:{value:si,enumerable:!0,writable:!0},_addListener:{value:ri,enumerable:!0,writable:!0},_removeListener:{value:oi,enumerable:!0,writable:!0},_postMessage:{value:ii,enumerable:!0,writable:!0}}),ec=new _n,tc=new xn(ec,Za),nc=new Rn(ec,tc).install();[new Rn(ec,tc),new cs,new Gs,new ya,La,_a,ho,aa,Ha,vs,new ko,new Qa,new Ya].forEach((function(e){nc.call(Za,e)}));var rc=Za;function oc(e,t){var n;switch(null!==(n=e.liffTypeByRequestMethod[t])&&void 0!==n?n:e.defaultLiffType){case"compact":return e.baseUrl.compact;case"tall":return e.baseUrl.tall;case"full":return e.baseUrl.full;default:return e.baseUrl[e.defaultLiffType]}}var ic,sc=function(e){function n(t){var n=e.call(this,t)||this;return n.postRequestAndWaitForResponse=function(e){return o(n,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=this.createRequestKey(),[4,this.relayRequestClient.request(e,t)];case 1:return r.sent(),[4,this.openWallet(t,e.method)];case 2:return r.sent(),[4,this.relayRequestClient.waitForResponse(t)];case 3:return n=r.sent(),[2,this.handleRpcResponse(n)]}}))}))},n.openWallet=function(e,t){return o(n,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return n=oc(this.config.liffWalletConfig,t)+"/r/".concat(e,"?chainId=").concat(this.config.chainId),[4,rc.subWindow.open({url:n})];case 1:return r.sent(),[2]}}))}))},n}return t(n,e),n}(Xt),ac=function(e){function n(t){var n=e.call(this,t)||this;return n.postRequestAndWaitForResponse=function(e){return o(n,void 0,void 0,(function(){var t,n,r;return i(this,(function(o){switch(o.label){case 0:t=this.createRequestKey(),this.openWallet(t,e.method),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.relayRequestClient.request(e,t)];case 2:return o.sent(),[3,4];case 3:throw n=o.sent(),this.closeWallet(),n;case 4:return[4,this.relayRequestClient.waitForResponse(t)];case 5:return r=o.sent(),this.closeWallet(),[2,this.handleRpcResponse(r)]}}))}))},n}return t(n,e),n.prototype.openWallet=function(e,t){var n=navigator.userAgent,r=this.getRequestBaseUrl(t)+"/r/".concat(e,"?chainId=").concat(this.config.chainId);if(h(n)&&p(n))window.location.href=r;else{if(window.kaiaPopUpWindow&&!window.kaiaPopUpWindow.closed)return window.kaiaPopUpWindow.focus(),void(window.kaiaPopUpWindow.location.href=r);var o=this.config.webWalletConfig.popupSize;window.kaiaPopUpWindow=window.open(r,"webWallet","width=".concat(o.width,",height=").concat(o.height))}},n.prototype.closeWallet=function(){window.kaiaPopUpWindow&&window.kaiaPopUpWindow.close(),window.kaiaPopUpWindow=null},n.prototype.getRequestBaseUrl=function(e){return h(navigator.userAgent)?oc(this.config.liffWalletConfig,e):this.config.webWalletConfig.baseUrl},n}(Xt),cc={};var uc,lc=(ic||(ic=1,function(e){function t(e){var t={},r=/(dolfin)[ \/]([\w.]+)/.exec(e)||/(edge)[ \/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(tizen)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(webkit)(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(e)||["","unknown"];return"webkit"===r[1]?r=/(iphone|ipad|ipod)[\S\s]*os ([\w._\-]+) like/.exec(e)||/(android)[ \/]([\w._\-]+);/.exec(e)||[r[0],"safari",r[2]]:"mozilla"===r[1]?/trident/.test(e)?r[1]="msie":r[1]="firefox":/polaris|natebrowser|([010|011|016|017|018|019]{3}\d{3,4}\d{4}$)/.test(e)&&(r[1]="polaris"),t[r[1]]=!0,t.name=r[1],t.version=n(r[2]),t}function n(e){var t={},n=e?e.split(/\.|-|_/):["0","0","0"];return t.info=n.join("."),t.major=n[0]||"0",t.minor=n[1]||"0",t.patch=n[2]||"0",t}function r(e){return function(e){return!(!e.match(/linux|windows (nt|98)|macintosh|cros/)||e.match(/android|mobile|polaris|lgtelecom|uzard|natebrowser|ktf;|skt;/))}(e)?"pc":function(e){return!!(e.match(/ipad/)||e.match(/android/)&&!e.match(/mobi|mini|fennec/)||e.match(/macintosh/)&&"undefined"!=typeof window&&window.navigator&&window.navigator.maxTouchPoints>1)}(e)?"tablet":function(e){return!!e.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)}(e)?"mobile":""}function o(e){var t={},r=/(iphone|ipad|ipod)[\S\s]*os ([\w._\-]+) like/.exec(e)||!!/polaris|natebrowser|([010|011|016|017|018|019]{3}\d{3,4}\d{4}$)/.test(e)&&["","polaris","0.0.0"]||/(windows)(?: nt | phone(?: os){0,1} | )([\w._\-]+)/.exec(e)||/(android)[ \/]([\w._\-]+);/.exec(e)||!!/android/.test(e)&&["","android","0.0.0"]||!!/(windows)/.test(e)&&["","windows","0.0.0"]||/(mac) os x ([\w._\-]+)/.exec(e)||/(tizen)[ \/]([\w._\-]+);/.exec(e)||!!/(linux)/.test(e)&&["","linux","0.0.0"]||!!/webos/.test(e)&&["","webos","0.0.0"]||/(cros)(?:\s[\w]+\s)([\d._\-]+)/.exec(e)||/(bada)[ \/]([\w._\-]+)/.exec(e)||!!/bada/.test(e)&&["","bada","0.0.0"]||!!/(rim|blackberry|bb10)/.test(e)&&["","blackberry","0.0.0"]||["","unknown","0.0.0"];return"iphone"===r[1]||"ipad"===r[1]||"ipod"===r[1]?r[1]="ios":"windows"===r[1]&&"98"===r[2]&&(r[2]="0.98.0"),"mac"===r[1]&&"undefined"!=typeof window&&window.navigator&&window.navigator.maxTouchPoints>1&&(r[1]="ios"),"cros"===r[1]&&(r[1]="chrome"),t[r[1]]=!0,t.name=r[1],t.version=n(r[2]),t}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var i=["crios","fxios","daumapps"];function s(e,t){var r={},o=null,s=i;Array.isArray(t)?s=i.concat(t):"string"==typeof t&&(s=i.concat([t]));for(var a=0,c=s.length;a<c;a+=1){var u=s[a];if(o=new RegExp("("+u+")[ \\/]([\\w._\\-]+)").exec(e))break}return o||(o=["",""]),o[1]?(r.isApp=!0,r.name=o[1],r.version=n(o[2])):r.isApp=!1,r}var a=e.userAgent=function(e,n){var i=function(e){return e?e.toLowerCase():"undefined"!=typeof window&&window.navigator&&"string"==typeof window.navigator.userAgent?window.navigator.userAgent.toLowerCase():""}(e);return{ua:i,browser:t(i),platform:r(i),os:o(i),app:s(i,n)}};"object"==typeof window&&window.navigator.userAgent&&(window.ua_result=a(window.navigator.userAgent)||null)}(((uc=cc).daumtools=uc,uc.util=uc,uc))),cc),fc=lc.userAgent(),dc=fc.os,hc=["firefox","opr/"];function pc(e){var t,n,r,o,i=e.onAppMissing,s=null!==(t=e.onUnsupportedEnvironment)&&void 0!==t?t:function(){};dc.android?(r=fc.browser.chrome&&+fc.browser.version.major>=25,o=new RegExp(hc.join("|"),"i"),r&&!o.test(fc.ua)&&e.intentURI&&!e.useUrlScheme?function(e){fc.browser.chrome?t():setTimeout(t,100);function t(){window.location.href=e}}(e.intentURI):(n=e.urlScheme,vc(300,i),wc(n))):dc.ios?function(e,t,n){var r=vc(2e3,t);parseInt(fc.os.version.major,10)<8?function(e){window.addEventListener("pagehide",(function t(){mc()&&(clearTimeout(e),window.removeEventListener("pagehide",t))}))}(r):function(e){document.addEventListener("visibilitychange",(function t(){mc()&&(clearTimeout(e),document.removeEventListener("visibilitychange",t))}))}(r);parseInt(fc.os.version.major,10)>8&&fc.os.ios?(void 0===n?n=e:clearTimeout(r),function(e){window.location.href=e}(n)):wc(e)}(e.urlScheme,i,e.universalLink):setTimeout((function(){s()}),100)}function vc(e,t){var n=(new Date).getTime();return setTimeout((function(){var r=(new Date).getTime();mc()&&r-n<e+100&&t()}),e)}function mc(){for(var e=["hidden","webkitHidden"],t=0,n=e.length;t<n;t++)if(void 0!==document[e[t]])return!document[e[t]];return!0}function wc(e){setTimeout((function(){(function(e){var t=document.createElement("iframe");return t.id=e,t.style.border="none",t.style.width="0",t.style.height="0",t.style.display="none",t.style.overflow="hidden",document.body.appendChild(t),t}("appLauncher")).src=e}),100)}var yc=function(e){function n(t){return e.call(this,t)||this}return t(n,e),n.prototype.postRequestAndWaitForResponse=function(e){return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=this.createRequestKey(),[4,this.relayRequestClient.request(e,t)];case 1:return r.sent(),this.openWallet(t),[4,this.relayRequestClient.waitForResponse(t)];case 2:return n=r.sent(),[2,this.handleRpcResponse(n)]}}))}))},n.prototype.openWallet=function(e){var t=this.config.sdkUIUrls.mobileWalletBridge,n="".concat(t).concat(e,"?chainId=").concat(this.config.chainId),r=encodeURIComponent(n),o="/browser?url=".concat(r),i=this.config.kaiaWalletMobileConfig;pc({urlScheme:"".concat(i.urlScheme,"://wallet").concat(o),intentURI:"intent://wallet".concat(o,"#Intent;scheme=kaiawallet;package=").concat(i.androidPackageName,";end"),onAppMissing:function(){alert("Kaia Wallet 앱이 설치되어 있지 않습니다.")}})},n}(Xt),gc=function(e){function r(t){var n=e.call(this)||this;return n.walletType=null,n.handler=null,n.initializeWalletType=function(){var e=navigator.userAgent,t=h(e),r=function(e){return/iPhone|iPad|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini|Mobile/.test(e)}(e),o=null!=globalThis.klaytn,i=n.sdkLocalStorage.getWalletType();switch(i){case E.Extension:if(t||r||!o)return null;break;case E.Mobile:if(!t&&!r)return null;break;case E.Web:if(t)return null;break;case E.Liff:if(!t)return null}return t?E.Liff:r||o?i:E.Web},n.config=t,n.chainNodeRpcClient=new b(t),n.sdkLocalStorage=new w(t.chainId),n.host=n.config.chainNodeRpcEndpoint,n.connected=!0,n.timeout=6e4,n.initialize(),n}return t(r,e),r.prototype.initialize=function(){this.walletType=this.initializeWalletType(),this.initializeHandler()},r.prototype.initializeHandler=function(){if(this.walletType)switch(this.walletType){case E.Extension:this.handler=new g(this,this.config);break;case E.Liff:var e=void 0;e=rc.isInClient()?new sc(this.config):new ac(this.config),this.handler=new A(this.config,e);break;case E.Web:this.handler=new A(this.config,new ac(this.config));break;case E.Mobile:this.handler=new A(this.config,new yc(this.config))}},r.prototype.getWalletType=function(){return this.walletType},r.prototype.request=function(e){return o(this,void 0,void 0,(function(){var t,r,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),t=e.method,-1===this.config.walletHandledMethods.indexOf(t)?[2,this.chainNodeRpcClient.requestRpc(e)]:(this.validateTxType(e),this.walletType?[3,2]:(r=this,[4,this.selectWalletType()]));case 1:r.walletType=i.sent(),this.initializeHandler(),i.label=2;case 2:return-1===this.config.methodsShouldSyncChain.indexOf(t)?[3,4]:[4,this.handler.switchChain(this.config.chainId)];case 3:i.sent(),i.label=4;case 4:return[2,this.handler.request(e)];case 5:throw o=i.sent(),console.error("Error in WalletProvider request",o),"string"==typeof(s=o)?{code:Number.parseInt(n.internal),message:s}:s instanceof l?{code:s.code,message:s.message,data:s.data}:{code:Number.parseInt(n.internal),message:u[n.internal].message};case 6:return[2]}var s}))}))},r.prototype.selectWalletType=function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,new C(this.config).selectType()];case 1:return e=t.sent(),this.sdkLocalStorage.setWalletType(e),[2,e]}}))}))},r.prototype.validateTxType=function(e){"kaia_signTransaction"!==e.method&&"klay_signTransaction"!==e.method||this.validateSignTransaction(e)},r.prototype.validateSignTransaction=function(e){var t=e.params.map((function(e){return new Map(Object.entries(e))}));if(1!==t.length)throw new f("Invalid params");var n=t[0].get("typeInt");if(void 0===n||"number"!=typeof n||-1===this.config.feeDelegatedTxTypes.indexOf(n))throw new f("Only fee delegated transaction can be signed with signTransaction request. Use 'sendTransaction' to sign transaction and send to network.")},r.prototype.send=function(e,t){return o(this,void 0,void 0,(function(){var n,r;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.request(e)];case 1:return n=o.sent(),t&&t(null,function(e){return{jsonrpc:"2.0",id:"",result:e}}(n)),[3,3];case 2:return r=o.sent(),t&&t(r,void 0),[3,3];case 3:return[2]}}))}))},r.prototype.supportsSubscriptions=function(){return!1},r.prototype.disconnect=function(){return!0},r}(_);function bc(e){return o(this,void 0,void 0,(function(){var t,n,r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:return t=null!==(s=e.sdkBaseUrl)&&void 0!==s?s:"https://sdk.dappportal.io",[4,fetch("".concat(t,"/config.json?sdkVersion=").concat("0.9.2"))];case 1:return[4,i.sent().json()];case 2:if(n=i.sent(),r=null!==(a=e.chainId)&&void 0!==a?a:n.defaultChainId,!(o=null!==(c=e.chainNodeRpcEndpoint)&&void 0!==c?c:n.chainNodeRpcEndpoints[r]))throw new Error("Please set the chainNodeRpcEndpoint");return[2,{clientId:e.clientId,chainId:r,chainNodeRpcEndpoint:o,sdkUIUrls:n.sdkUIUrls,relayServerConfig:n.relayServerConfig,paymentServerConfig:n.paymentServerConfig,stripePopupSize:n.stripePopupSize,kaiaWalletMobileConfig:n.kaiaWalletMobileConfig,liffWalletConfig:n.liffWalletConfig,webWalletConfig:n.webWalletConfig,walletHandledMethods:n.walletHandledMethods,methodsShouldSyncChain:n.methodsShouldSyncChain,methodsShouldAttachTxTypeParamsWhenRequestToExtension:n.methodsShouldAttachTxTypeParamsWhenRequestToExtension,methodsShouldConvertInputFieldToDataFieldWhenRequestToExtension:n.methodsShouldConvertInputFieldToDataFieldWhenRequestToExtension,txTypesShouldConvertInputFieldToDataFieldWhenRequestToExtension:n.txTypesShouldConvertInputFieldToDataFieldWhenRequestToExtension,feeDelegatedTxTypes:n.feeDelegatedTxTypes,blockedMethods:n.blockedMethods,blockedBrowsersUserAgent:n.blockedBrowsersUserAgent}]}}))}))}var Sc=function(){function e(e){this.resolveUserClose=function(){},this.rejectUserClose=function(){},this.browserGuideUIUrl=e.sdkUIUrls.browserGuide}return e.prototype.setupListeners=function(){var e=this,t=function(t){var n=e.iframe;if(n&&t.source===n.contentWindow){var r=t.data;if(r&&"object"==typeof r){var o=r.event;if(o)switch(o){case"Loaded":break;case"Close":e.onSelectedClose()}}}};window.addEventListener("message",t),this.eventListener=t},e.prototype.clearListeners=function(){var e=this.eventListener;e&&(window.removeEventListener("message",e),this.eventListener=void 0)},e.prototype.onSelectedClose=function(){this.resolveUserClose&&this.resolveUserClose(null)},e.prototype.reset=function(){this.resolveUserClose=void 0,this.rejectUserClose=void 0,T(),this.clearListeners()},e.prototype.showBrowserGuide=function(e){return o(this,void 0,void 0,(function(){var t,n=this;return i(this,(function(r){switch(r.label){case 0:return t=new Promise((function(e,t){n.resolveUserClose=e,n.rejectUserClose=t})),this.setupListeners(),this.iframe=S("".concat(this.browserGuideUIUrl,"?browserName=").concat(e),"100%","100%"),[4,t];case 1:return r.sent(),this.reset(),[2]}}))}))},e.prototype.cancel=function(){this.rejectUserClose&&this.rejectUserClose(new Error("User canceled")),this.reset()},e}(),Tc=function(e){var t=this;this.getPayment=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t="".concat(this.baseUrl,"/api/v1/payment/info"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Mt.get(t,{params:{id:e},headers:{"Content-Type":"application/json"}})];case 2:return[2,r.sent().data];case 3:throw n=r.sent(),console.error("Fail to get payment info - ",n),n;case 4:return[2]}}))}))},this.waitForConfirm=function(e){return o(t,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:t=1,n.label=1;case 1:if(!(t<this.maxRetryCount))return[3,7];n.label=2;case 2:return n.trys.push([2,5,,6]),[4,this.getPaymentStatus(e)];case 3:return"CONFIRMED"===n.sent().status?[2]:[4,this.delayPolling(1e3)];case 4:return n.sent(),[3,6];case 5:return n.sent(),t++,[3,6];case 6:return[3,1];case 7:throw new Error("Fail to wait for response")}}))}))},this.delayPolling=function(e){return o(t,void 0,void 0,(function(){return i(this,(function(t){return new Promise((function(t){return setTimeout(t,e)})),[2]}))}))},this.getPaymentStatus=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t="".concat(this.baseUrl,"/api/v1/payment/status"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Mt.get(t,{params:{id:e},headers:{"Content-Type":"application/json"}})];case 2:return[2,r.sent().data];case 3:throw n=r.sent(),console.error("Fail to get payment info - ",n),n;case 4:return[2]}}))}))},this.register=function(e,n){return o(t,void 0,void 0,(function(){var t,r;return i(this,(function(o){switch(o.label){case 0:t="".concat(this.baseUrl,"/api/v1/payment/register"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Mt.post(t,{id:e,txHash:n},{headers:{"Content-Type":"application/json"}})];case 2:return o.sent(),[3,4];case 3:throw r=o.sent(),console.error("Fail to register - ",r),r;case 4:return[2]}}))}))},this.startPayment=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t="".concat(this.baseUrl,"/api/v1/payment/start"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Mt.post(t,{id:e},{headers:{"Content-Type":"application/json"}})];case 2:return[2,r.sent().data];case 3:throw n=r.sent(),console.error("Fail to startPayment - ",n),n;case 4:return[2]}}))}))},this.baseUrl=e.paymentServerConfig.baseUrl,this.maxRetryCount=e.relayServerConfig.maxRetryCount},Ec=function(){function e(e){this.paymentClient=new Tc(e)}return e.prototype.getPayment=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.paymentClient.getPayment(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.startPayment=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.paymentClient.startPayment(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.waitForConfirm=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.paymentClient.waitForConfirm(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.registerTxHash=function(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this.paymentClient.register(e,t)];case 1:return n.sent(),[2]}}))}))},e.prototype.openStripePaymentPage=function(e,t,n){var r=navigator.userAgent;h(r)&&p(r)?window.location.href=e:window.open(e,"stripePayment","width=".concat(t,",height=").concat(n))},e}(),Cc=function(){function e(e,t){this.config=e,this.walletProvider=t,this.handler=new Ec(e)}return e.prototype.startPayment=function(e){return o(this,void 0,void 0,(function(){var t,n,o,s,a,c,u,l,f,d;return i(this,(function(i){switch(i.label){case 0:return[4,this.walletProvider.request({method:"kaia_accounts"})];case 1:if(!(t=i.sent()))throw new Error("Wallet is not connected");return[4,this.handler.getPayment(e)];case 2:return n=i.sent(),[4,this.handler.startPayment(e)];case 3:return o=i.sent(),"CRYPTO"!==n.pgType?[3,8]:(s=o.paymentTxDTO,[4,this.walletProvider.request({method:"kaia_gasPrice",params:[]})]);case 4:return a=i.sent(),c={typeInt:48,from:t,to:s.to,gasPrice:a,value:s.value,input:s.input},[4,this.walletProvider.request({method:"kaia_estimateGas",params:[c]})];case 5:return u=i.sent(),[4,this.walletProvider.request({method:"kaia_sendTransaction",params:[r(r({},c),{gas:u})]})];case 6:return l=i.sent(),f=l,[4,this.handler.registerTxHash(e,f)];case 7:return i.sent(),[3,9];case 8:d=o.redirectUrl,this.handler.openStripePaymentPage(d,this.config.stripePopupSize.width,this.config.stripePopupSize.height),i.label=9;case 9:return[4,this.handler.waitForConfirm(e)];case 10:return i.sent(),[2]}}))}))},e}();return function(){function e(e){this.config=e,this.browserGuideUi=new Sc(e)}return e.init=function(t){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return n=e.bind,[4,bc(t)];case 1:return[2,new(n.apply(e,[void 0,r.sent()]))]}}))}))},e.prototype.getWalletProvider=function(){return this.walletProvider||(this.walletProvider=new gc(this.config)),this.walletProvider},e.prototype.getPaymentProvider=function(){if(!this.paymentProvider){var e=this.getWalletProvider();this.paymentProvider=new Cc(this.config,e)}return this.paymentProvider},e.prototype.isSupportedBrowser=function(){return null===this.getBrowserNameIfUnsupported()},e.prototype.showUnsupportedBrowserGuide=function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return(e=this.getBrowserNameIfUnsupported())?[4,this.browserGuideUi.showBrowserGuide(e)]:[2];case 1:return[2,t.sent()]}}))}))},e.prototype.getBrowserNameIfUnsupported=function(){var e,t,n,r,o=navigator.userAgent;try{for(var i=s(Object.entries(this.config.blockedBrowsersUserAgent)),c=i.next();!c.done;c=i.next()){var u=a(c.value,2),l=u[0],f=u[1];try{for(var d=(n=void 0,s(f)),h=d.next();!h.done;h=d.next()){var p=h.value;if(new RegExp(p).test(o))return l}}catch(v){n={error:v}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}}}catch(m){e={error:m}}finally{try{c&&!c.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return null},e}()}();
